<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Commandes - GROUPE EXPRESS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #ff4e00;
            --primary-dark: #cc3e00;
            --success: #28a745;
            --success-dark: #218838;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --dark: #1a1a2e;
            --light: #f8f9fa;
            --border: #dee2e6;
            --shadow: 0 2px 8px rgba(0,0,0,0.1);
            --shadow-lg: 0 8px 25px rgba(0,0,0,0.15);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Modal de s√©lection d'√©tablissement */
        .establishment-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .establishment-modal.hidden {
            display: none;
        }

        .establishment-content {
            background: white;
            padding: 3rem;
            border-radius: 25px;
            max-width: 600px;
            width: 90%;
            box-shadow: var(--shadow-lg);
            text-align: center;
        }

        .establishment-content h2 {
            font-size: 2rem;
            color: var(--dark);
            margin-bottom: 1rem;
        }

        .establishment-content p {
            color: #6c757d;
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .establishment-buttons {
            display: grid;
            gap: 1rem;
        }

        .establishment-btn {
            padding: 1.5rem 2rem;
            border: 3px solid var(--border);
            border-radius: 15px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        .establishment-btn:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
            background: linear-gradient(135deg, var(--primary), #ff6b9d);
            color: white;
        }

        .establishment-btn .icon {
            font-size: 2rem;
        }

        .header {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-lg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .header-logo {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), #ff6b9d);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .header-info h1 {
            font-size: 1.8rem;
            color: var(--dark);
            margin-bottom: 0.3rem;
        }

        .header-details {
            display: flex;
            gap: 1.5rem;
            font-size: 0.9rem;
            color: #6c757d;
        }

        .header-details span {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .current-establishment {
            background: linear-gradient(135deg, var(--primary), #ff6b9d);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.95rem;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .connection-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .connection-status.connected {
            background: #d4edda;
            color: #155724;
        }

        .connection-status.disconnected {
            background: #f8d7da;
            color: #721c24;
        }

        .btn-change-establishment {
            background: linear-gradient(135deg, var(--info), #20c9e0);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-change-establishment:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-reset-all {
            background: linear-gradient(135deg, var(--danger), #c82333);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-reset-all:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.3s ease;
            position: relative;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }

        .stat-icon.today {
            background: linear-gradient(135deg, #28a745, #34ce57);
        }

        .stat-icon.pending {
            background: linear-gradient(135deg, #ffc107, #ffb300);
        }

        .stat-icon.delivered {
            background: linear-gradient(135deg, #17a2b8, #20c9e0);
        }

        .stat-icon.total {
            background: linear-gradient(135deg, #ff4e00, #ff6b9d);
        }

        .stat-info {
            flex: 1;
        }

        .stat-info h3 {
            font-size: 0.9rem;
            color: #6c757d;
            font-weight: 500;
            margin-bottom: 0.3rem;
        }

        .stat-info p {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark);
        }

        .reset-revenue-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: var(--danger);
            color: white;
            border: none;
            padding: 0.3rem 0.6rem;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .reset-revenue-btn:hover {
            background: #c82333;
            transform: scale(1.05);
        }

        .search-container {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            position: relative;
        }

        .search-box {
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 1rem 1rem 1rem 3rem;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 78, 0, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.3rem;
            color: #6c757d;
        }

        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid var(--border);
            border-top: none;
            border-radius: 0 0 12px 12px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 100;
            box-shadow: var(--shadow-lg);
            display: none;
        }

        .search-suggestions.active {
            display: block;
        }

        .suggestion-item {
            padding: 1rem;
            cursor: pointer;
            border-bottom: 1px solid var(--border);
            transition: all 0.2s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        .suggestion-item:hover {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .suggestion-code {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.1rem;
        }

        .suggestion-details {
            display: flex;
            gap: 1rem;
            align-items: center;
            font-size: 0.85rem;
            color: #6c757d;
        }

        .suggestion-status {
            padding: 0.3rem 0.6rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .filters {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-group label {
            font-weight: 600;
            color: var(--dark);
        }

        .filter-select, .filter-input {
            padding: 0.5rem 1rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-select:hover, .filter-input:hover {
            border-color: var(--primary);
        }

        .clear-filters-btn {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: auto;
        }

        .clear-filters-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .orders-container {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: var(--shadow-lg);
        }

        .orders-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border);
        }

        .orders-header h2 {
            font-size: 1.5rem;
            color: var(--dark);
        }

        .refresh-btn {
            background: linear-gradient(135deg, var(--info), #20c9e0);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .refresh-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .order-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .order-card:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .order-card.delivered {
            opacity: 0.7;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            border-color: var(--success);
        }

        .order-card.highlighted {
            border: 3px solid var(--primary);
            box-shadow: 0 0 20px rgba(255, 78, 0, 0.3);
            animation: highlight 0.5s ease;
        }

        @keyframes highlight {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .order-code {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .order-status {
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-nouveau {
            background: linear-gradient(135deg, #ffc107, #ffb300);
            color: #000;
        }

        .status-livre {
            background: linear-gradient(135deg, #28a745, #34ce57);
            color: white;
        }

        .order-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .detail-icon {
            width: 35px;
            height: 35px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .detail-info h4 {
            font-size: 0.8rem;
            color: #6c757d;
            font-weight: 500;
        }

        .detail-info p {
            font-size: 1rem;
            font-weight: 600;
            color: var(--dark);
        }

        .order-items {
            background: white;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        .order-items h4 {
            font-size: 0.9rem;
            color: #6c757d;
            margin-bottom: 0.5rem;
        }

        .item-list {
            list-style: none;
        }

        .item-list li {
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .item-list li:last-child {
            border-bottom: none;
        }

        .item-name {
            font-weight: 600;
            color: var(--dark);
        }

        .item-category {
            background: var(--primary);
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 5px;
            font-size: 0.75rem;
            margin-left: 0.5rem;
        }

        .order-total {
            background: linear-gradient(135deg, var(--dark), #2d2d44);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .order-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex: 1;
            justify-content: center;
            min-width: 150px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-deliver {
            background: linear-gradient(135deg, var(--success), #34ce57);
            color: white;
        }

        .btn-deliver:disabled {
            background: #6c757d;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .btn-block {
            background: linear-gradient(135deg, var(--danger), #c82333);
            color: white;
        }

        .btn-block:disabled {
            background: #6c757d;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .btn-delete {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            min-width: 120px;
        }

        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: #6c757d;
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .loading {
            text-align: center;
            padding: 3rem;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .error-banner {
            background: #f8d7da;
            color: #721c24;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            display: none;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            box-shadow: var(--shadow-lg);
        }

        .modal-header {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 1rem;
        }

        .modal-body {
            margin-bottom: 1.5rem;
        }

        .modal-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            margin-top: 0.5rem;
        }

        .modal-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
        }

        .modal-btn {
            flex: 1;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-btn-confirm {
            background: var(--danger);
            color: white;
        }

        .modal-btn-cancel {
            background: #6c757d;
            color: white;
        }

        .modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        @media (max-width: 768px) {
            .header {
                padding: 1.5rem;
            }

            .header-left {
                flex-direction: column;
                align-items: flex-start;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .filters {
                flex-direction: column;
                align-items: stretch;
            }

            .filter-group {
                flex-direction: column;
                align-items: stretch;
            }

            .clear-filters-btn {
                margin-left: 0;
            }

            .order-details {
                grid-template-columns: 1fr;
            }

            .order-actions {
                flex-direction: column;
            }

            .btn {
                min-width: 100%;
            }

            .establishment-buttons {
                grid-template-columns: 1fr;
            }
        }

        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 15px;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 1rem;
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast.success {
            border-left: 4px solid var(--success);
        }

        .toast.error {
            border-left: 4px solid var(--danger);
        }
    </style>
</head>
<body>
    <!-- Modal de s√©lection d'√©tablissement -->
    <div class="establishment-modal" id="establishment-modal">
        <div class="establishment-content">
            <h2>üè¢ S√©lectionner un √©tablissement</h2>
            <p>Veuillez choisir l'√©tablissement pour lequel vous souhaitez voir les commandes</p>
            <div class="establishment-buttons">
                <button class="establishment-btn" data-establishment="UTT LOKO ZONE 4C">
                    <span class="icon">üè´</span>
                    <span>UTT LOKO ZONE 4C</span>
                </button>
                <button class="establishment-btn" data-establishment="LA FONTAINE">
                    <span class="icon">‚õ≤</span>
                    <span>LA FONTAINE</span>
                </button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <div class="header-left">
                <div class="header-logo">üçΩÔ∏è</div>
                <div class="header-info">
                    <h1>Dashboard Commandes</h1>
                    <div class="header-details">
                        <span>üìÖ <span id="current-date">--</span></span>
                        <span>‚è∞ <span id="current-time">--:--</span></span>
                        <span class="current-establishment" id="current-establishment">--</span>
                    </div>
                </div>
            </div>
            <div class="header-actions">
                <div class="connection-status" id="connection-status">
                    <span>üîÑ</span>
                    <span>Connexion...</span>
                </div>
                <button class="btn-change-establishment" id="change-establishment-btn">
                    üîÑ Changer d'√©tablissement
                </button>
                <button class="btn-reset-all" id="reset-all-btn">
                    üóëÔ∏è R√©initialiser tout
                </button>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon today">üí∞</div>
                <div class="stat-info">
                    <h3>Revenu du jour</h3>
                    <p id="today-revenue">0 FCFA</p>
                </div>
                <button class="reset-revenue-btn" id="reset-revenue-btn" title="R√©initialiser le revenu du jour">
                    üîÑ Reset
                </button>
            </div>
            <div class="stat-card">
                <div class="stat-icon pending">‚è≥</div>
                <div class="stat-info">
                    <h3>En attente</h3>
                    <p id="pending-count">0</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon delivered">‚úÖ</div>
                <div class="stat-info">
                    <h3>Livr√©es aujourd'hui</h3>
                    <p id="delivered-count">0</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon total">üì¶</div>
                <div class="stat-info">
                    <h3>Total commandes</h3>
                    <p id="total-count">0</p>
                </div>
            </div>
        </div>

        <div class="search-container">
            <div class="search-box">
                <span class="search-icon">üîç</span>
                <input 
                    type="text" 
                    class="search-input" 
                    id="search-input" 
                    placeholder="Rechercher par code (CMD-001) ou nom de client..."
                    autocomplete="off"
                >
                <div class="search-suggestions" id="search-suggestions"></div>
            </div>
        </div>

        <div class="filters">
            <div class="filter-group">
                <label>üìÖ Date:</label>
                <input type="date" class="filter-input" id="date-filter">
            </div>
            <div class="filter-group">
                <label>üìä Statut:</label>
                <select class="filter-select" id="status-filter">
                    <option value="all">Tous</option>
                    <option value="nouveau">En attente</option>
                    <option value="livre">Livr√©es</option>
                </select>
            </div>
            <div class="filter-group">
                <label>üè∑Ô∏è Cat√©gorie:</label>
                <select class="filter-select" id="category-filter">
                    <option value="all">Toutes</option>
                    <option value="A">A - P√¢tes & Petit pois</option>
                    <option value="B">B - Tch√®pes</option>
                    <option value="C">C - Riz</option>
                    <option value="D">D - Porc</option>
                    <option value="E">E - Atti√©k√®</option>
                    <option value="F">F - D√™gu√™</option>
                    <option value="G">G - Madeleines</option>
                    <option value="H">H - Jus</option>
                    <option value="I">I - Autres</option>
                </select>
            </div>
            <button class="clear-filters-btn" id="clear-filters-btn">
                üîÑ R√©initialiser les filtres
            </button>
        </div>

        <div class="orders-container">
            <div class="orders-header">
                <h2>üìã Liste des commandes</h2>
                <button class="refresh-btn" id="refresh-btn">
                    üîÑ Actualiser
                </button>
            </div>
            <div id="orders-list">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <p>Chargement des commandes...</p>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="reset-modal">
        <div class="modal-content">
            <div class="modal-header">üóëÔ∏è R√©initialiser toutes les commandes</div>
            <div class="modal-body">
                <p style="margin-bottom: 1rem; color: var(--danger); font-weight: 600;">
                    ‚ö†Ô∏è Attention : Cette action supprimera TOUTES les commandes de mani√®re permanente !
                </p>
                <label for="password-input" style="font-weight: 600; color: var(--dark);">
                    Entrez le mot de passe pour confirmer :
                </label>
                <input 
                    type="password" 
                    class="modal-input" 
                    id="password-input" 
                    placeholder="Mot de passe requis"
                >
            </div>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-cancel" id="cancel-reset-btn">
                    Annuler
                </button>
                <button class="modal-btn modal-btn-confirm" id="confirm-reset-btn">
                    Supprimer tout
                </button>
            </div>
        </div>
    </div>

    <div class="modal" id="delete-order-modal">
        <div class="modal-content">
            <div class="modal-header">üóëÔ∏è Supprimer cette commande</div>
            <div class="modal-body">
                <p style="margin-bottom: 1rem; color: var(--danger); font-weight: 600;">
                    ‚ö†Ô∏è Attention : Cette action supprimera d√©finitivement cette commande !
                </p>
                <label for="delete-password-input" style="font-weight: 600; color: var(--dark);">
                    Entrez le mot de passe pour confirmer :
                </label>
                <input 
                    type="password" 
                    class="modal-input" 
                    id="delete-password-input" 
                    placeholder="Mot de passe requis"
                >
            </div>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-cancel" id="cancel-delete-btn">
                    Annuler
                </button>
                <button class="modal-btn modal-btn-confirm" id="confirm-delete-btn">
                    Supprimer
                </button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";
        import { getFirestore, collection, onSnapshot, doc, updateDoc, addDoc, getDocs, deleteDoc, setDoc } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBsGrY-AqYMoI70kT3WMxLgW0HwYA4KyaQ",
            authDomain: "livraison-c8498.firebaseapp.com",
            projectId: "livraison-c8498",
            storageBucket: "livraison-c8498.firebasestorage.app",
            messagingSenderId: "403240604780",
            appId: "1:403240604780:web:77d84ad03d68bdaddfb449",
            measurementId: "G-5YF89BZ5RY"
        };

        let app;
        let db;
        let allOrders = [];
        let isConnected = false;
        let highlightedOrderId = null;
        let orderToDelete = null;
        let currentEstablishment = localStorage.getItem('selectedEstablishment') || null;

        // Initialisation Firebase
        try {
            app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            updateConnectionStatus(true);
            console.log('‚úÖ Firebase initialis√© avec succ√®s');
        } catch (error) {
            console.error('‚ùå Erreur Firebase:', error);
            updateConnectionStatus(false);
            showError('Erreur de connexion √† Firebase');
        }

        // Mise √† jour de l'heure en temps r√©el
        function updateDateTime() {
            const now = new Date();
            const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const dateStr = now.toLocaleDateString('fr-FR', dateOptions);
            const timeStr = now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            
            document.getElementById('current-date').textContent = dateStr;
            document.getElementById('current-time').textContent = timeStr;
        }

        // Mettre √† jour l'heure toutes les secondes
        updateDateTime();
        setInterval(updateDateTime, 1000);

        // Gestion de la s√©lection d'√©tablissement
        function showEstablishmentModal() {
            document.getElementById('establishment-modal').classList.remove('hidden');
        }

        function hideEstablishmentModal() {
            document.getElementById('establishment-modal').classList.add('hidden');
        }

        function selectEstablishment(establishment) {
            currentEstablishment = establishment;
            localStorage.setItem('selectedEstablishment', establishment);
            document.getElementById('current-establishment').textContent = `üè¢ ${establishment}`;
            hideEstablishmentModal();
            loadOrders();
            showToast(`‚úÖ √âtablissement s√©lectionn√©: ${establishment}`, 'success');
        }

        // V√©rifier si un √©tablissement est s√©lectionn√©
        if (!currentEstablishment) {
            showEstablishmentModal();
        } else {
            document.getElementById('current-establishment').textContent = `üè¢ ${currentEstablishment}`;
        }

        // √âv√©nements pour les boutons d'√©tablissement
        document.querySelectorAll('.establishment-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                selectEstablishment(btn.dataset.establishment);
            });
        });

        document.getElementById('change-establishment-btn').addEventListener('click', showEstablishmentModal);

        // Mise √† jour du statut de connexion
        function updateConnectionStatus(connected) {
            isConnected = connected;
            const statusEl = document.getElementById('connection-status');
            if (connected) {
                statusEl.className = 'connection-status connected';
                statusEl.innerHTML = '<span>‚úÖ</span><span>Connect√©</span>';
            } else {
                statusEl.className = 'connection-status disconnected';
                statusEl.innerHTML = '<span>‚ùå</span><span>D√©connect√©</span>';
            }
        }

        // Afficher une erreur
        function showError(message) {
            const ordersList = document.getElementById('orders-list');
            ordersList.innerHTML = `
                <div class="error-banner">
                    <span style="font-size: 1.5rem;">‚ö†Ô∏è</span>
                    <div>
                        <strong>Erreur:</strong> ${message}
                    </div>
                </div>
            `;
        }

        // Obtenir la date du jour
        function getTodayDate() {
            const now = new Date();
            return now.toISOString().split('T')[0];
        }

        // R√©initialiser le revenu du jour
        function resetTodayRevenue() {
            if (!confirm('Voulez-vous vraiment r√©initialiser le revenu du jour ?')) return;
            
            const today = getTodayDate();
            const revenueKey = `dailyRevenue_${currentEstablishment}`;
            const dailyRevenue = JSON.parse(localStorage.getItem(revenueKey) || '{}');
            dailyRevenue[today] = 0;
            localStorage.setItem(revenueKey, JSON.stringify(dailyRevenue));
            
            updateStats();
            showToast('‚úÖ Revenu du jour r√©initialis√© !', 'success');
        }

        // Ouvrir le modal de r√©initialisation
        function openResetModal() {
            document.getElementById('reset-modal').classList.add('active');
            document.getElementById('password-input').value = '';
        }

        // Fermer le modal de r√©initialisation
        function closeResetModal() {
            document.getElementById('reset-modal').classList.remove('active');
            document.getElementById('password-input').value = '';
        }

        // Confirmer la r√©initialisation totale
        async function confirmResetAll() {
            const password = document.getElementById('password-input').value;
            
            if (password !== 'marcio@') {
                showToast('‚ùå Mot de passe incorrect !', 'error');
                return;
            }

            try {
                const ordersSnapshot = await getDocs(collection(db, 'orders'));
                const deletePromises = [];
                
                ordersSnapshot.forEach((docSnapshot) => {
                    const data = docSnapshot.data();
                    const orderEstablishment = data.customer?.establishment || data.establishment;
                    
                    if (orderEstablishment === currentEstablishment) {
                        deletePromises.push(deleteDoc(doc(db, 'orders', docSnapshot.id)));
                    }
                });

                await Promise.all(deletePromises);
                
                const today = getTodayDate();
                const revenueKey = `dailyRevenue_${currentEstablishment}`;
                localStorage.setItem(revenueKey, JSON.stringify({ [today]: 0 }));

                closeResetModal();
                showToast('‚úÖ Toutes les commandes de cet √©tablissement ont √©t√© supprim√©es !', 'success');
                
                setTimeout(() => location.reload(), 1000);
            } catch (error) {
                console.error('Erreur:', error);
                showToast('‚ùå Erreur lors de la suppression', 'error');
            }
        }

        // Ouvrir le modal de suppression de commande
        function openDeleteModal(orderId) {
            orderToDelete = orderId;
            document.getElementById('delete-order-modal').classList.add('active');
            document.getElementById('delete-password-input').value = '';
        }

        // Fermer le modal de suppression
        function closeDeleteModal() {
            document.getElementById('delete-order-modal').classList.remove('active');
            document.getElementById('delete-password-input').value = '';
            orderToDelete = null;
        }

        // Confirmer la suppression d'une commande
        async function confirmDeleteOrder() {
            const password = document.getElementById('delete-password-input').value;
            
            if (password !== 'marcio@') {
                showToast('‚ùå Mot de passe incorrect !', 'error');
                return;
            }

            if (!orderToDelete) return;

            try {
                await deleteDoc(doc(db, 'orders', orderToDelete));
                closeDeleteModal();
                showToast('‚úÖ Commande supprim√©e avec succ√®s !', 'success');
                orderToDelete = null;
            } catch (error) {
                console.error('Erreur:', error);
                showToast('‚ùå Erreur lors de la suppression', 'error');
            }
        }

        // Bloquer un client
        async function blockClient(orderId, customerName, customerWhatsapp) {
            if (!confirm(`Voulez-vous vraiment bloquer ${customerName} ?`)) return;

            try {
                await addDoc(collection(db, 'marcio'), {
                    name: customerName,
                    whatsapp: customerWhatsapp,
                    blockedAt: new Date().toISOString(),
                    orderId: orderId,
                    establishment: currentEstablishment
                });

                showToast(`‚úÖ Client ${customerName} bloqu√© avec succ√®s !`, 'success');
            } catch (error) {
                console.error('Erreur lors du blocage:', error);
                showToast('‚ùå Erreur lors du blocage du client', 'error');
            }
        }

        // Charger les commandes depuis Firebase
        function loadOrders() {
            if (!db) {
                showError('Base de donn√©es non initialis√©e');
                return;
            }

            if (!currentEstablishment) {
                showError('Veuillez s√©lectionner un √©tablissement');
                return;
            }

            try {
                const ordersQuery = collection(db, 'orders');
                
                onSnapshot(ordersQuery, (snapshot) => {
                    allOrders = [];
                    snapshot.forEach((docSnap) => {
                        const data = docSnap.data();
                        const orderEstablishment = data.customer?.establishment || data.establishment;
                        
                        // Filtrer uniquement les commandes de l'√©tablissement s√©lectionn√©
                        if (orderEstablishment === currentEstablishment) {
                            const order = {
                                id: docSnap.id,
                                code: data.code || docSnap.id,
                                customer: data.customer || { 
                                    name: data.customerName || 'N/A', 
                                    whatsapp: data.customerWhatsapp || 'N/A',
                                    establishment: orderEstablishment || 'N/A'
                                },
                                items: data.items || [],
                                total: data.total || 0,
                                status: data.status || 'nouveau',
                                createdAt: data.createdAt || data.timestamp || null,
                                timestamp: data.timestamp || data.createdAt || new Date().toISOString(),
                                deliveredAt: data.deliveredAt || null,
                                deliveryDate: data.deliveryDate || null
                            };
                            
                            allOrders.push(order);
                        }
                    });
                    
                    // Trier par date de cr√©ation (plus r√©cent en premier)
                    allOrders.sort((a, b) => {
                        const dateA = a.createdAt ? (a.createdAt.seconds ? a.createdAt.seconds : new Date(a.createdAt).getTime()) : 0;
                        const dateB = b.createdAt ? (b.createdAt.seconds ? b.createdAt.seconds : new Date(b.createdAt).getTime()) : 0;
                        return dateB - dateA;
                    });
                    
                    console.log(`‚úÖ ${allOrders.length} commandes charg√©es pour ${currentEstablishment}`);
                    
                    updateConnectionStatus(true);
                    filterOrders();
                }, (error) => {
                    console.error('‚ùå Erreur snapshot:', error);
                    updateConnectionStatus(false);
                    showError('Impossible de charger les commandes: ' + error.message);
                });
            } catch (error) {
                console.error('‚ùå Erreur chargement:', error);
                updateConnectionStatus(false);
                showError('Erreur lors du chargement des commandes: ' + error.message);
            }
        }

        // Recherche en temps r√©el
        const searchInput = document.getElementById('search-input');
        const searchSuggestions = document.getElementById('search-suggestions');

        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.trim().toUpperCase();
            
            if (searchTerm.length === 0) {
                searchSuggestions.classList.remove('active');
                highlightedOrderId = null;
                filterOrders();
                return;
            }

            const matches = allOrders.filter(order => {
                const customerName = (order.customer?.name || '').toUpperCase();
                const orderCode = order.code.toUpperCase();
                
                return orderCode.includes(searchTerm) || customerName.includes(searchTerm);
            });

            if (matches.length > 0) {
                searchSuggestions.innerHTML = matches.slice(0, 5).map(order => {
                    const date = order.createdAt ? new Date(order.createdAt.seconds * 1000) : new Date(order.timestamp);
                    const formattedDate = date.toLocaleDateString('fr-FR');
                    const isDelivered = order.status === 'livre';
                    
                    return `
                        <div class="suggestion-item" data-order-id="${order.id}">
                            <div>
                                <div class="suggestion-code">${order.code}</div>
                                <div class="suggestion-details">
                                    <span>üë§ ${order.customer?.name || 'N/A'}</span>
                                    <span>üìÖ ${formattedDate}</span>
                                    <span>üí∞ ${order.total.toLocaleString()} FCFA</span>
                                </div>
                            </div>
                            <span class="suggestion-status status-${order.status}">
                                ${isDelivered ? '‚úÖ Livr√©e' : '‚è≥ En attente'}
                            </span>
                        </div>
                    `;
                }).join('');
                
                document.querySelectorAll('.suggestion-item').forEach(item => {
                    item.addEventListener('click', () => {
                        selectOrder(item.dataset.orderId);
                    });
                });
                
                searchSuggestions.classList.add('active');
            } else {
                searchSuggestions.innerHTML = `
                    <div class="suggestion-item" style="pointer-events: none;">
                        <div style="color: #6c757d;">‚ùå Aucune commande trouv√©e</div>
                    </div>
                `;
                searchSuggestions.classList.add('active');
            }
        });

        // S√©lectionner une commande depuis les suggestions
        function selectOrder(orderId) {
            highlightedOrderId = orderId;
            searchSuggestions.classList.remove('active');
            
            const order = allOrders.find(o => o.id === orderId);
            if (order) {
                searchInput.value = order.code;
                filterOrders();
                
                setTimeout(() => {
                    const orderElement = document.querySelector(`[data-order-id="${orderId}"].order-card`);
                    if (orderElement) {
                        orderElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }, 100);
            }
        }

        // Fermer les suggestions au clic ext√©rieur
        document.addEventListener('click', (e) => {
            if (!searchInput.contains(e.target) && !searchSuggestions.contains(e.target)) {
                searchSuggestions.classList.remove('active');
            }
        });

        // R√©initialiser les filtres
        function clearFilters() {
            document.getElementById('date-filter').value = '';
            document.getElementById('status-filter').value = 'all';
            document.getElementById('category-filter').value = 'all';
            searchInput.value = '';
            highlightedOrderId = null;
            filterOrders();
            showToast('‚úÖ Filtres r√©initialis√©s', 'success');
        }

        // Filtrer les commandes
        function filterOrders() {
            const dateFilter = document.getElementById('date-filter').value;
            const statusFilter = document.getElementById('status-filter').value;
            const categoryFilter = document.getElementById('category-filter').value;
            const searchTerm = searchInput.value.trim().toUpperCase();

            let filtered = [...allOrders];

            if (searchTerm) {
                filtered = filtered.filter(order => {
                    const customerName = (order.customer?.name || '').toUpperCase();
                    const orderCode = order.code.toUpperCase();
                    
                    return orderCode.includes(searchTerm) || customerName.includes(searchTerm);
                });
            }

            if (dateFilter) {
                filtered = filtered.filter(order => {
                    const orderDate = order.createdAt 
                        ? new Date(order.createdAt.seconds * 1000).toISOString().split('T')[0]
                        : new Date(order.timestamp).toISOString().split('T')[0];
                    return orderDate === dateFilter;
                });
            }

            if (statusFilter !== 'all') {
                filtered = filtered.filter(order => order.status === statusFilter);
            }

            if (categoryFilter !== 'all') {
                filtered = filtered.filter(order => {
                    return order.items && order.items.some(item => item.category === categoryFilter);
                });
            }

            displayOrders(filtered);
            updateStats();
        }

        // Afficher les commandes
        function displayOrders(orders) {
            const ordersList = document.getElementById('orders-list');
            
            if (orders.length === 0) {
                const hasFilters = document.getElementById('date-filter').value || 
                                  document.getElementById('status-filter').value !== 'all' ||
                                  document.getElementById('category-filter').value !== 'all' ||
                                  searchInput.value.trim();
                
                ordersList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üì¶</div>
                        <h3>${hasFilters ? 'Aucune commande trouv√©e' : 'Aucune commande'}</h3>
                        <p>${hasFilters ? 'Essayez de modifier les filtres' : 'Les commandes appara√Ætront ici'}</p>
                        ${hasFilters ? '<button class="clear-filters-btn" id="empty-clear-btn" style="margin-top: 1rem;">üîÑ R√©initialiser les filtres</button>' : ''}
                    </div>
                `;
                
                if (hasFilters) {
                    document.getElementById('empty-clear-btn').addEventListener('click', clearFilters);
                }
                return;
            }

            ordersList.innerHTML = orders.map(order => {
                const date = order.createdAt ? new Date(order.createdAt.seconds * 1000) : new Date(order.timestamp);
                const formattedDate = date.toLocaleDateString('fr-FR');
                const formattedTime = date.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
                const mainCategory = order.items && order.items[0]?.category || 'N/A';
                const isDelivered = order.status === 'livre';
                const isHighlighted = highlightedOrderId === order.id;

                return `
                    <div class="order-card ${isDelivered ? 'delivered' : ''} ${isHighlighted ? 'highlighted' : ''}" data-order-id="${order.id}">
                        <div class="order-header">
                            <div class="order-code">
                                üì¶ ${order.code}
                            </div>
                            <span class="order-status status-${order.status}">
                                ${order.status === 'nouveau' ? '‚è≥ En attente' : '‚úÖ Livr√©e'}
                            </span>
                        </div>

                        <div class="order-details">
                            <div class="detail-item">
                                <div class="detail-icon">üë§</div>
                                <div class="detail-info">
                                    <h4>Client</h4>
                                    <p>${order.customer?.name || 'N/A'}</p>
                                </div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-icon">üì±</div>
                                <div class="detail-info">
                                    <h4>WhatsApp</h4>
                                    <p>${order.customer?.whatsapp || 'N/A'}</p>
                                </div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-icon">üè¢</div>
                                <div class="detail-info">
                                    <h4>√âtablissement</h4>
                                    <p>${order.customer?.establishment || 'N/A'}</p>
                                </div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-icon">üìÖ</div>
                                <div class="detail-info">
                                    <h4>Date</h4>
                                    <p>${formattedDate}</p>
                                </div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-icon">‚è∞</div>
                                <div class="detail-info">
                                    <h4>Heure</h4>
                                    <p>${formattedTime}</p>
                                </div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-icon">üè∑Ô∏è</div>
                                <div class="detail-info">
                                    <h4>Cat√©gorie</h4>
                                    <p>${mainCategory}</p>
                                </div>
                            </div>
                        </div>

                        <div class="order-items">
                            <h4>üìã Articles command√©s (${order.items?.length || 0})</h4>
                            <ul class="item-list">
                                ${order.items && order.items.length > 0 ? order.items.map(item => `
                                    <li>
                                        <span>
                                            <span class="item-name">${item.qty || 1}x ${item.name || 'Article'}</span>
                                            <span class="item-category">${item.category || 'N/A'}</span>
                                        </span>
                                        <strong>${((item.price || 0) * (item.qty || 1)).toLocaleString()} FCFA</strong>
                                    </li>
                                `).join('') : '<li>Aucun article</li>'}
                            </ul>
                        </div>

                        <div class="order-total">
                            üí∞ Total: ${order.total.toLocaleString()} FCFA
                        </div>

                        <div class="order-actions">
                            <button class="btn btn-deliver" 
                                    data-order-id="${order.id}"
                                    data-order-total="${order.total}"
                                    ${isDelivered ? 'disabled' : ''}>
                                ${isDelivered ? '‚úÖ D√©j√† livr√©e' : 'üöö Marquer comme livr√©e'}
                            </button>
                            <button class="btn btn-block" 
                                    data-order-id="${order.id}"
                                    data-customer-name="${order.customer?.name || 'N/A'}"
                                    data-customer-whatsapp="${order.customer?.whatsapp || 'N/A'}">
                                üö´ Bloquer
                            </button>
                            <button class="btn btn-delete" 
                                    data-order-id="${order.id}">
                                üóëÔ∏è Supprimer
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            // Attacher les √©v√©nements aux boutons
            document.querySelectorAll('.btn-deliver').forEach(btn => {
                btn.addEventListener('click', () => {
                    if (!btn.disabled) {
                        markAsDelivered(btn.dataset.orderId, parseFloat(btn.dataset.orderTotal));
                    }
                });
            });

            document.querySelectorAll('.btn-block').forEach(btn => {
                btn.addEventListener('click', () => {
                    blockClient(btn.dataset.orderId, btn.dataset.customerName, btn.dataset.customerWhatsapp);
                });
            });

            document.querySelectorAll('.btn-delete').forEach(btn => {
                btn.addEventListener('click', () => {
                    openDeleteModal(btn.dataset.orderId);
                });
            });
        }

        // Marquer comme livr√©e
        async function markAsDelivered(orderId, orderTotal) {
            if (!confirm('Confirmer la livraison de cette commande ?')) return;

            if (!db) {
                showToast('‚ùå Erreur: Base de donn√©es non disponible', 'error');
                return;
            }

            try {
                await updateDoc(doc(db, 'orders', orderId), {
                    status: 'livre',
                    deliveredAt: new Date().toISOString()
                });

                const today = getTodayDate();
                const revenueKey = `dailyRevenue_${currentEstablishment}`;
                const dailyRevenue = JSON.parse(localStorage.getItem(revenueKey) || '{}');
                if (!dailyRevenue[today]) {
                    dailyRevenue[today] = 0;
                }
                dailyRevenue[today] += orderTotal;
                localStorage.setItem(revenueKey, JSON.stringify(dailyRevenue));

                showToast('‚úÖ Commande marqu√©e comme livr√©e !', 'success');
                updateStats();
            } catch (error) {
                console.error('Erreur:', error);
                showToast('‚ùå Erreur lors de la mise √† jour', 'error');
            }
        }

        // Mettre √† jour les statistiques
        function updateStats() {
            const today = getTodayDate();
            const revenueKey = `dailyRevenue_${currentEstablishment}`;
            const dailyRevenue = JSON.parse(localStorage.getItem(revenueKey) || '{}');
            
            const todayOrders = allOrders.filter(order => {
                const orderDate = order.createdAt 
                    ? new Date(order.createdAt.seconds * 1000).toISOString().split('T')[0]
                    : new Date(order.timestamp).toISOString().split('T')[0];
                return orderDate === today;
            });

            const pendingOrders = allOrders.filter(order => order.status === 'nouveau');
            const deliveredToday = todayOrders.filter(order => order.status === 'livre');

            document.getElementById('today-revenue').textContent = 
                (dailyRevenue[today] || 0).toLocaleString() + ' FCFA';
            document.getElementById('pending-count').textContent = pendingOrders.length;
            document.getElementById('delivered-count').textContent = deliveredToday.length;
            document.getElementById('total-count').textContent = allOrders.length;
        }

        // Afficher un toast de notification
        function showToast(message, type) {
            const existingToasts = document.querySelectorAll('.toast');
            existingToasts.forEach(toast => toast.remove());

            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <div style="font-size: 1.5rem;">${type === 'success' ? '‚úÖ' : '‚ùå'}</div>
                <div>${message}</div>
            `;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // Attacher les √©v√©nements
        document.getElementById('reset-all-btn').addEventListener('click', openResetModal);
        document.getElementById('reset-revenue-btn').addEventListener('click', resetTodayRevenue);
        document.getElementById('cancel-reset-btn').addEventListener('click', closeResetModal);
        document.getElementById('confirm-reset-btn').addEventListener('click', confirmResetAll);
        document.getElementById('cancel-delete-btn').addEventListener('click', closeDeleteModal);
        document.getElementById('confirm-delete-btn').addEventListener('click', confirmDeleteOrder);
        document.getElementById('clear-filters-btn').addEventListener('click', clearFilters);
        document.getElementById('refresh-btn').addEventListener('click', () => location.reload());
        document.getElementById('date-filter').addEventListener('change', filterOrders);
        document.getElementById('status-filter').addEventListener('change', filterOrders);
        document.getElementById('category-filter').addEventListener('change', filterOrders);

        // Charger les commandes au d√©marrage
        if (currentEstablishment) {
            loadOrders();
        }
    </script>
</body>
</html>
