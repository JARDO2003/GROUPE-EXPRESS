<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>GROUPE EXPRESS - Repas Universitaires</title>
    <meta name="description" content="Livraison des repas aux √©tudiants sur le campus">
    
    <!-- PWA Configuration -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff4e00">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="GROUPE EXPRESS">
    <link rel="apple-touch-icon" href="image/u.png">
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-messaging-compat.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #ff4e00;
            --primary-light: #ff6b2b;
            --primary-dark: #cc3e00;
            --secondary: #1a1a2e;
            --accent: #ffd700;
            --surface: #FFFFFF;
            --background: #f5f7fa;
            --card-bg: #FFFFFF;
            --text-primary: #1a1a2e;
            --text-secondary: #6c757d;
            --border: #e8ecef;
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.12);
            --shadow-lg: 0 8px 32px rgba(0,0,0,0.16);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            --gradient-primary: linear-gradient(135deg, #ff4e00 0%, #ff6b2b 100%);
            --gradient-secondary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-success: linear-gradient(135deg, #28a745 0%, #34ce57 100%);
        }

        html {
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Inter', sans-serif;
            background: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* HEADER MODERNE */
        .header {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            padding: 16px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow-sm);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
        }

        .header-logo {
            width: 56px;
            height: 56px;
            border-radius: 16px;
            object-fit: cover;
            box-shadow: var(--shadow-md);
            border: 3px solid var(--primary);
            transition: transform 0.3s ease;
        }

        .header-logo:hover {
            transform: scale(1.05) rotate(5deg);
        }

        .logo-text {
            font-size: 20px;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .icon-btn {
            position: relative;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
            font-size: 24px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: var(--background);
        }

        .icon-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .icon-btn:active {
            transform: scale(0.95);
        }

        .cart-icon {
            background: var(--gradient-primary);
            color: white;
        }

        .contact-btn {
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
        }

        .cart-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: var(--accent);
            color: var(--secondary);
            border-radius: 50%;
            min-width: 20px;
            height: 20px;
            font-size: 11px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid white;
            box-shadow: var(--shadow-sm);
        }

        /* ALERTE TEMPORELLE */
        .time-alert {
            background: var(--gradient-primary);
            color: white;
            padding: 16px 20px;
            text-align: center;
            font-weight: 600;
            font-size: 15px;
            box-shadow: var(--shadow-sm);
            display: none;
        }

        .time-alert.urgent {
            animation: pulse 2s infinite;
            background: linear-gradient(135deg, #dc3545, #ff4757);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.9; }
        }

        /* SECTION PUBLICIT√âS */
        .ads-section {
            background: white;
            padding: 24px 0;
            border-bottom: 1px solid var(--border);
        }

        .ads-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            height: 280px;
            border-radius: var(--radius-xl);
            overflow: hidden;
        }

        .ads-slider {
            display: flex;
            height: 100%;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .ad-item {
            min-width: 100%;
            height: 100%;
            position: relative;
            cursor: pointer;
            border-radius: var(--radius-xl);
            overflow: hidden;
        }

        .ad-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s ease;
        }

        .ad-item:hover .ad-image {
            transform: scale(1.05);
        }

        .ad-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
            color: white;
            padding: 32px;
        }

        .ad-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .ad-subtitle {
            font-size: 16px;
            opacity: 0.95;
            line-height: 1.5;
        }

        /* NAVIGATION CAT√âGORIES */
        .nav-section {
            background: white;
            padding: 24px 0;
            border-bottom: 1px solid var(--border);
        }

        .nav-stories {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding: 0 20px 12px;
            scrollbar-width: thin;
            scrollbar-color: var(--primary) transparent;
        }

        .nav-stories::-webkit-scrollbar {
            height: 6px;
        }

        .nav-stories::-webkit-scrollbar-track {
            background: transparent;
        }

        .nav-stories::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 3px;
        }

        .nav-story {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            min-width: 100px;
            text-decoration: none;
            color: inherit;
            padding: 12px;
            border-radius: var(--radius-md);
            transition: all 0.3s ease;
        }

        .nav-story:hover {
            background: var(--background);
            transform: translateY(-4px);
        }

        .nav-story-avatar {
            width: 72px;
            height: 72px;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-story:hover .nav-story-avatar {
            transform: scale(1.1);
            box-shadow: var(--shadow-lg);
        }

        .nav-story-image {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid white;
        }

        .nav-story-text {
            font-size: 13px;
            font-weight: 600;
            text-align: center;
            color: var(--text-primary);
        }

        .notification-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            background: #ff0000;
            color: white;
            border-radius: 50%;
            min-width: 24px;
            height: 24px;
            font-size: 12px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid white;
            animation: badgePulse 2s infinite;
        }

        @keyframes badgePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        /* CONTENEUR PRINCIPAL */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 32px 20px;
        }

        /* CARTE DE CAT√âGORIE */
        .category-card {
            background: var(--card-bg);
            border-radius: var(--radius-xl);
            overflow: hidden;
            margin-bottom: 40px;
            box-shadow: var(--shadow-md);
            transition: all 0.4s ease;
        }

        .category-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .category-header {
            background: var(--gradient-primary);
            color: white;
            padding: 28px 32px;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .category-icon {
            font-size: 48px;
            filter: drop-shadow(0 2px 8px rgba(0,0,0,0.2));
        }

        .category-info h3 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .category-info p {
            font-size: 16px;
            opacity: 0.95;
        }

        /* GRILLE DE PLATS */
        .food-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 24px;
            padding: 32px;
        }

        .food-item {
            background: white;
            border-radius: var(--radius-lg);
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border: 1px solid var(--border);
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .food-item:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .food-image-wrapper {
            position: relative;
            width: 100%;
            padding-top: 75%;
            overflow: hidden;
            background: var(--background);
        }

        .food-item-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s ease;
        }

        .food-item:hover .food-item-image {
            transform: scale(1.15);
        }

        .food-item-content {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .food-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .food-description {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 16px;
            flex: 1;
            line-height: 1.5;
        }

        .food-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            margin-top: auto;
        }

        .food-price {
            font-size: 22px;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .add-to-cart-btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--radius-md);
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm);
            white-space: nowrap;
        }

        .add-to-cart-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .add-to-cart-btn:active {
            transform: scale(0.98);
        }

        /* MODALES */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(8px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        .modal-overlay.show {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: white;
            border-radius: var(--radius-xl);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 32px;
            text-align: center;
            border-bottom: 1px solid var(--border);
            background: linear-gradient(135deg, rgba(255, 78, 0, 0.05), rgba(255, 107, 43, 0.05));
        }

        .modal-header h2 {
            font-size: 26px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .modal-header p {
            font-size: 15px;
            color: var(--text-secondary);
        }

        .close-btn {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.05);
            border: none;
            cursor: pointer;
            font-size: 24px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(0, 0, 0, 0.1);
            transform: rotate(90deg);
        }

        .cart-items {
            padding: 24px;
            max-height: 400px;
            overflow-y: auto;
        }

        .cart-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--background);
            border-radius: var(--radius-md);
            margin-bottom: 12px;
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-sm);
            object-fit: cover;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .cart-item-price {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .remove-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(220, 53, 69, 0.1);
            border: none;
            color: #dc3545;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .remove-btn:hover {
            background: #dc3545;
            color: white;
        }

        .cart-total {
            font-size: 24px;
            font-weight: 700;
            text-align: center;
            padding: 24px;
            background: linear-gradient(135deg, rgba(255, 78, 0, 0.1), rgba(255, 107, 43, 0.1));
            border-radius: var(--radius-md);
            margin: 0 24px 24px;
        }

        .checkout-btn {
            width: calc(100% - 48px);
            margin: 0 24px 24px;
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 18px;
            border-radius: var(--radius-md);
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-md);
        }

        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .empty-state {
            text-align: center;
            padding: 60px 24px;
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state h3 {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .empty-state p {
            font-size: 15px;
            color: var(--text-secondary);
        }

        /* BOUTONS FLOTTANTS */
        .floating-btns {
            position: fixed;
            bottom: 24px;
            right: 24px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 999;
        }

        .floating-btn {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            font-size: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .floating-btn:hover {
            transform: scale(1.1) translateY(-4px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.25);
        }

        .floating-btn:active {
            transform: scale(0.95);
        }

        .notif-btn {
            background: var(--gradient-secondary);
            color: white;
        }

        .install-btn {
            background: var(--gradient-primary);
            color: white;
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .logo-text {
                font-size: 16px;
            }

            .header-logo {
                width: 48px;
                height: 48px;
            }

            .icon-btn {
                width: 44px;
                height: 44px;
                font-size: 20px;
            }

            .ads-container {
                height: 200px;
                padding: 0 12px;
            }

            .ad-title {
                font-size: 20px;
            }

            .ad-subtitle {
                font-size: 14px;
            }

            .category-header {
                padding: 20px 24px;
            }

            .category-icon {
                font-size: 36px;
            }

            .category-info h3 {
                font-size: 22px;
            }

            .category-info p {
                font-size: 14px;
            }

            .food-grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
                gap: 16px;
                padding: 20px;
            }

            .food-title {
                font-size: 16px;
            }

            .food-price {
                font-size: 18px;
            }

            .add-to-cart-btn {
                padding: 10px 16px;
                font-size: 14px;
            }

            .floating-btns {
                bottom: 16px;
                right: 16px;
            }

            .floating-btn {
                width: 52px;
                height: 52px;
                font-size: 24px;
            }
        }

        @media (max-width: 480px) {
            .food-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
                padding: 16px;
            }

            .food-item-content {
                padding: 16px;
            }

            .food-footer {
                flex-direction: column;
                gap: 8px;
            }

            .add-to-cart-btn {
                width: 100%;
            }
        }

        /* Modal de quantit√© personnalis√©e */
.quantity-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.75);
    backdrop-filter: blur(8px);
    z-index: 3000;
    align-items: center;
    justify-content: center;
    padding: 20px;
    animation: fadeIn 0.3s ease;
}

.quantity-modal.show {
    display: flex;
}

.quantity-modal-content {
    background: white;
    border-radius: var(--radius-xl);
    width: 100%;
    max-width: 400px;
    padding: 32px;
    position: relative;
    animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: var(--shadow-lg);
}

.quantity-modal-header {
    text-align: center;
    margin-bottom: 24px;
}

.quantity-modal-header h3 {
    font-size: 22px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.quantity-modal-header p {
    font-size: 14px;
    color: var(--text-secondary);
}

.quantity-input-group {
    margin-bottom: 24px;
}

.quantity-input-label {
    display: block;
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.quantity-controls {
    display: flex;
    align-items: center;
    gap: 12px;
    background: var(--background);
    padding: 8px;
    border-radius: var(--radius-md);
}

.quantity-btn {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    border: none;
    background: var(--gradient-primary);
    color: white;
    font-size: 24px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.quantity-btn:hover {
    transform: scale(1.1);
    box-shadow: var(--shadow-md);
}

.quantity-btn:active {
    transform: scale(0.95);
}

.quantity-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.quantity-input {
    flex: 1;
    text-align: center;
    font-size: 28px;
    font-weight: 700;
    color: var(--primary);
    border: none;
    background: transparent;
    outline: none;
}

.quantity-modal-actions {
    display: flex;
    gap: 12px;
}

.quantity-action-btn {
    flex: 1;
    padding: 14px;
    border: none;
    border-radius: var(--radius-md);
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.quantity-cancel-btn {
    background: var(--background);
    color: var(--text-primary);
}

.quantity-cancel-btn:hover {
    background: #e0e0e0;
}

.quantity-confirm-btn {
    background: var(--gradient-primary);
    color: white;
    box-shadow: var(--shadow-sm);
}

.quantity-confirm-btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.dish-preview {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    background: var(--background);
    border-radius: var(--radius-md);
    margin-bottom: 20px;
}

.dish-preview-icon {
    width: 60px;
    height: 60px;
    border-radius: var(--radius-sm);
    background: var(--gradient-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
}

.dish-preview-info {
    flex: 1;
}

.dish-preview-name {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.dish-preview-price {
    font-size: 14px;
    color: var(--text-secondary);
}

.quantity-total {
    text-align: center;
    padding: 16px;
    background: linear-gradient(135deg, rgba(255, 78, 0, 0.1), rgba(255, 107, 43, 0.1));
    border-radius: var(--radius-md);
    margin-bottom: 20px;
}

.quantity-total-label {
    font-size: 14px;
    color: var(--text-secondary);
    margin-bottom: 4px;
}

.quantity-total-amount {
    font-size: 28px;
    font-weight: 800;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

/* Responsive */
@media (max-width: 480px) {
    .quantity-modal-content {
        padding: 24px;
    }
    
    .quantity-modal-header h3 {
        font-size: 20px;
    }
    
    .quantity-input {
        font-size: 24px;
    }
    
    .quantity-total-amount {
        font-size: 24px;
    }
}

/* Modal de collecte d'informations client */
.customer-info-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.75);
    backdrop-filter: blur(8px);
    z-index: 3000;
    align-items: center;
    justify-content: center;
    padding: 20px;
    animation: fadeIn 0.3s ease;
}

.customer-info-modal.show {
    display: flex;
}

.customer-info-content {
    background: white;
    border-radius: var(--radius-xl);
    width: 100%;
    max-width: 450px;
    padding: 32px;
    position: relative;
    animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: var(--shadow-lg);
}

.customer-info-header {
    text-align: center;
    margin-bottom: 28px;
}

.customer-info-icon {
    font-size: 56px;
    margin-bottom: 16px;
}

.customer-info-header h3 {
    font-size: 24px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.customer-info-header p {
    font-size: 14px;
    color: var(--text-secondary);
}

.input-group {
    margin-bottom: 20px;
}

.input-label {
    display: block;
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.input-label .required {
    color: var(--primary);
    margin-left: 4px;
}

.custom-input {
    width: 100%;
    padding: 14px 16px;
    border: 2px solid var(--border);
    border-radius: var(--radius-md);
    font-size: 16px;
    font-family: inherit;
    transition: all 0.3s ease;
    background: var(--background);
}

.custom-input:focus {
    outline: none;
    border-color: var(--primary);
    background: white;
    box-shadow: 0 0 0 4px rgba(255, 78, 0, 0.1);
}

.custom-input::placeholder {
    color: var(--text-secondary);
    opacity: 0.6;
}

.input-hint {
    font-size: 12px;
    color: var(--text-secondary);
    margin-top: 6px;
    display: flex;
    align-items: center;
    gap: 4px;
}

.customer-info-actions {
    display: flex;
    gap: 12px;
    margin-top: 24px;
}

.customer-action-btn {
    flex: 1;
    padding: 14px;
    border: none;
    border-radius: var(--radius-md);
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.customer-cancel-btn {
    background: var(--background);
    color: var(--text-primary);
}

.customer-cancel-btn:hover {
    background: #e0e0e0;
}

.customer-submit-btn {
    background: var(--gradient-primary);
    color: white;
    box-shadow: var(--shadow-sm);
}

.customer-submit-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.customer-submit-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.order-summary {
    background: linear-gradient(135deg, rgba(255, 78, 0, 0.05), rgba(255, 107, 43, 0.05));
    padding: 16px;
    border-radius: var(--radius-md);
    margin-bottom: 24px;
    border: 1px solid rgba(255, 78, 0, 0.2);
}

.order-summary-title {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.order-summary-items {
    font-size: 14px;
    color: var(--text-primary);
    margin-bottom: 8px;
    max-height: 60px;
    overflow-y: auto;
}

.order-summary-total {
    font-size: 20px;
    font-weight: 800;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-align: right;
}

@media (max-width: 480px) {
    .customer-info-content {
        padding: 24px;
    }
    
    .customer-info-icon {
        font-size: 48px;
    }
    
    .customer-info-header h3 {
        font-size: 20px;
    }
    
    .custom-input {
        font-size: 16px; /* Important pour √©viter le zoom sur iOS */
    }
}
    </style>
</head>
<body>
    <!-- Alerte temporelle -->
    <div class="time-alert" id="time-alert"></div>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo-section">
                <img src="image/GE.jpg" alt="GROUPE EXPRESS" class="header-logo">
                <div class="logo-text">GROUPE EXPRESS</div>
            </div>
            <div class="header-actions">
                <button class="icon-btn cart-icon" onclick="toggleCart()" id="cart-button">
                    üõí
                    <span class="cart-badge" id="cart-badge" style="display: none;">0</span>
                </button>
                <a href="tel:+2250564061004" class="icon-btn contact-btn" title="Appeler">
                    üìû
                </a>
            </div>
        </div>
    </header>

    <!-- Section Publicit√©s -->
    <section class="ads-section">
        <div class="ads-container">
            <div class="ads-slider" id="ads-slider">
                <div class="ad-item" onclick="window.open('annonce.html', '_blank')">
                    <img src="image/vi.jpg" alt="Promotion" class="ad-image">
                    <div class="ad-overlay">
                        <div class="ad-title">üî• Promotion Sp√©ciale</div>
                        <div class="ad-subtitle">3 Plats offerts √† 1500F - Commandez maintenant!</div>
                    </div>
                </div>
                <div class="ad-item" onclick="window.open('annonce.html', '_blank')">
                    <img src="image/MEG2.jpg" alt="Nouveau" class="ad-image">
                    <div class="ad-overlay">
                        <div class="ad-title">üÜï Nouveau Menu</div>
                        <div class="ad-subtitle">Retrait au rez-de-chauss√©e - Stand Groupe Express</div>
                    </div>
                </div>
                <div class="ad-item" onclick="window.open('annonce.html', '_blank')">
                    <img src="image/meg1.jpg" alt="Bient√¥t" class="ad-image">
                    <div class="ad-overlay">
                        <div class="ad-title">‚ö° Tr√®s Bient√¥t</div>
                        <div class="ad-subtitle">De nouvelles surprises vous attendent!</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Navigation Cat√©gories -->
    <section class="nav-section">
        <div class="nav-stories">
            <a href="shopping.html" class="nav-story">
                <div class="nav-story-avatar">üõçÔ∏è</div>
                <div class="nav-story-text">Shopping</div>
            </a>
            <div class="nav-story" onclick="toggleOrders()">
                <div class="nav-story-avatar">üì¶</div>
                <div class="nav-story-text">Mes commandes</div>
            </div>
            <a href="actualit√©.html" class="nav-story">
                <div class="nav-story-avatar">
                    <img src="image/re.jpg" alt="R√©seau" class="nav-story-image">
                </div>
                <div class="nav-story-text">R√©seau social</div>
            </a>
            <a href="merlin.html" class="nav-story">
                <div class="nav-story-avatar">
                    <img src="image/tp.jpg" alt="Jeu" class="nav-story-image">
                </div>
                <div class="nav-story-text">Gagner un plat</div>
            </a>
            <a href="annonce.html" class="nav-story">
                <div class="nav-story-avatar">
                    üì¢
                    <div class="notification-badge">7</div>
                </div>
                <div class="nav-story-text">Annonces</div>
            </a>
            <a href="apropos.html" class="nav-story">
                <div class="nav-story-avatar">‚ÑπÔ∏è</div>
                <div class="nav-story-text">√Ä propos</div>
            </a>
            <a href="fournisseur.html" class="nav-story">
                <div class="nav-story-avatar">üë®‚Äçüç≥</div>
                <div class="nav-story-text">Fournisseur</div>
            </a>
        </div>
    </section>

    <!-- Conteneur Principal -->
    <div class="container">
        <!-- Cat√©gorie: P√¢tes & Petit Pois -->
        <div class="category-card">
            <div class="category-header">
                <div class="category-icon">üçù</div>
                <div class="category-info">
                    <h3>P√¢tes & Petit Pois</h3>
                    <p>Les classiques revisit√©s</p>
                </div>
            </div>
            <div class="food-grid">
                <div class="food-item" onclick="promptAddToCart('Spaghetti rognon', 600, 'A')">
                    <div class="food-image-wrapper">
                        <img src="image/spa.jpg" alt="Spaghetti rognon" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Spaghetti rognon</div>
                        <div class="food-description">Spaghetti pr√©par√© avec du rognon savoureux</div>
                        <div class="food-footer">
                            <div class="food-price">600 FCFA</div>
                            <button class="add-to-cart-btn" onclick="event.stopPropagation(); promptAddToCart('Spaghetti rognon', 600, 'A')">
                                üõí Ajouter
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/spaghetti nouv.jpg" alt="Spaghetti foi" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Spaghetti foi</div>
                        <div class="food-description">Spaghetti pr√©par√© avec du foie tendre</div>
                        <div class="food-footer">
                            <div class="food-price">600 FCFA</div>
                            <button class="add-to-cart-btn" onclick="promptAddToCart('Spaghetti foi', 600, 'A')">
                                üõí Ajouter
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/vi.jpg" alt="Spaghetti viande" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Spaghetti √† la viande</div>
                        <div class="food-description">Spaghetti avec de la viande hach√©e savoureuse</div>
                        <div class="food-footer">
                            <div class="food-price">800 FCFA</div>
                            <button class="add-to-cart-btn" onclick="promptAddToCart('Spaghetti √† la viande', 800, 'A')">
                                üõí Ajouter
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/SPAHRA .jpg" alt="Spaghetti rognon + oeuf" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Spaghetti rognon + oeuf grill√©</div>
                        <div class="food-description">Combo parfait avec oeuf grill√©</div>
                        <div class="food-footer">
                            <div class="food-price">700 FCFA</div>
                            <button class="add-to-cart-btn" onclick="promptAddToCart('Spaghetti rognon + oeuf grill√©', 700, 'A')">
                                üõí Ajouter
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/spagh oeuf.jpg" alt="Spaghetti foi + oeuf" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Spaghetti foi + oeuf grill√©</div>
                        <div class="food-description">D√©licieux m√©lange foi et oeuf</div>
                        <div class="food-footer">
                            <div class="food-price">700 FCFA</div>
                            <button class="add-to-cart-btn" onclick="promptAddToCart('Spaghetti foi + oeuf grill√©', 700, 'A')">
                                üõí Ajouter
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/foi.jpg" alt="Sauter revenir foi" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Sauter revenir au foie</div>
                        <div class="food-description">Plat saut√© avec du foie savoureux</div>
                        <div class="food-footer">
                            <div class="food-price">1500 FCFA</div>
                            <button class="add-to-cart-btn" onclick="promptAddToCart('Sauter revenir au foie', 1500, 'A')">
                                üõí Ajouter
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/rognon.jpg" alt="Sauter revenir rognon" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Sauter revenir au rognon</div>
                        <div class="food-description">Plat saut√© avec du rognon tendre</div>
                        <div class="food-footer">
                            <div class="food-price">1500 FCFA</div>
                            <button class="add-to-cart-btn" onclick="promptAddToCart('Sauter revenir au rognon', 1500, 'A')">
                                üõí Ajouter
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/viande.jpg" alt="Sauter revenir viande" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Sauter revenir viande</div>
                        <div class="food-description">Plat saut√© avec de la viande</div>
                        <div class="food-footer">
                            <div class="food-price">1500 FCFA</div>
                            <button class="add-to-cart-btn" onclick="promptAddToCart('Sauter revenir viande', 1500, 'A')">
                                üõí Ajouter
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/petit poid.jpg" alt="Petit pois rognon" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Petit pois rognon</div>
                        <div class="food-description">Petit pois accompagn√© de rognon</div>
                        <div class="food-footer">
                            <div class="food-price">1000 FCFA</div>
                            <button class="add-to-cart-btn" onclick="promptAddToCart('Petit pois rognon', 1000, 'A')">
                                üõí Ajouter
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/petit poid rogno,.jpg" alt="Petit pois viande" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Petit pois √† la viande</div>
                        <div class="food-description">Petit pois avec de la viande</div>
                        <div class="food-footer">
                            <div class="food-price">1500 FCFA</div>
                            <button class="add-to-cart-btn" onclick="promptAddToCart('Petit pois √† la viande', 1500, 'A')">
                                üõí Ajouter
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cat√©gorie: Tch√®pes -->
        <div class="category-card">
            <div class="category-header">
                <div class="category-icon">üçö</div>
                <div class="category-info">
                    <h3>Tch√®pes</h3>
                    <p>Nos plats de tch√®pe savoureux</p>
                </div>
            </div>
            <div class="food-grid">
                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/tcheo poi.jpg" alt="Tch√®pe poisson" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Tch√®pe au poisson</div>
                        <div class="food-description">Tch√®pe accompagn√© de poisson frais</div>
                        <div class="food-footer">
                            <div class="food-price">500 FCFA</div>
                            <button class="add-to-cart-btn" onclick="selectTchep('Tch√®pe au poisson', 500)">
                                üìã Choisir
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/tcheo.jpg" alt="Tch√®pe poulet" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Tch√®pe au poulet</div>
                        <div class="food-description">Tch√®pe savoureux au poulet</div>
                        <div class="food-footer">
                            <div class="food-price">1000 FCFA</div>
                            <button class="add-to-cart-btn" onclick="selectTchep('Tch√®pe au poulet', 1000)">
                                üìã Choisir
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/tchep poulet.jpg" alt="Tch√®pe poulet XXL" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Tch√®pe au poulet XXL</div>
                        <div class="food-description">Format g√©n√©reux pour grand app√©tit</div>
                        <div class="food-footer">
                            <div class="food-price">2000 FCFA</div>
                            <button class="add-to-cart-btn" onclick="selectTchep('Tch√®pe au poulet XXL', 2000)">
                                üìã Choisir
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/tchep ara.jpg" alt="Tch√®pe viande XXL" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Tch√®pe viande XXL</div>
                        <div class="food-description">Tch√®pe accompagn√© de viande g√©n√©reuse</div>
                        <div class="food-footer">
                            <div class="food-price">2000 FCFA</div>
                            <button class="add-to-cart-btn" onclick="selectTchep('Tch√®pe viande XXL', 2000)">
                                üìã Choisir
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cat√©gorie: Riz -->
        <div class="category-card">
            <div class="category-header">
                <div class="category-icon">üçõ</div>
                <div class="category-info">
                    <h3>Riz</h3>
                    <p>D√©couvrez nos plats de riz</p>
                </div>
            </div>
            <div class="food-grid">
                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/sauce arrrrachide.jpg" alt="Riz sauce arachide" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Riz sauce arachide</div>
                        <div class="food-description">Riz accompagn√© de sauce arachide onctueuse</div>
                        <div class="food-footer">
                            <div class="food-price">D√®s 500 FCFA</div>
                            <button class="add-to-cart-btn" onclick="selectRice('Riz sauce arachide')">
                                üìã Formats
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/riz nouv.jpg" alt="Riz sauce feuille" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Riz sauce feuille</div>
                        <div class="food-description">Riz avec sauce aux feuilles vertes</div>
                        <div class="food-footer">
                            <div class="food-price">D√®s 500 FCFA</div>
                            <button class="add-to-cart-btn" onclick="selectRice('Riz sauce feuille')">
                                üìã Formats
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/RIZ SA TOMA.jpg" alt="Riz sauce tomate" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Riz sauce tomate</div>
                        <div class="food-description">Riz avec sauce tomate savoureuse</div>
                        <div class="food-footer">
                            <div class="food-price">D√®s 500 FCFA</div>
                            <button class="add-to-cart-btn" onclick="selectRice('Riz sauce tomate')">
                                üìã Formats
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cat√©gorie: Porc au four -->
        <div class="category-card">
            <div class="category-header">
                <div class="category-icon">üê∑</div>
                <div class="category-info">
                    <h3>Porc au four</h3>
                    <p>D√©licieux porc pr√©par√© au four</p>
                </div>
            </div>
            <div class="food-grid">
                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/PORC1.jpg" alt="Porc 2 boules" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Porc au four (2 boules)</div>
                        <div class="food-description">Porc avec 2 boules d'atti√©k√®</div>
                        <div class="food-footer">
                            <div class="food-price">1200 FCFA</div>
                            <button class="add-to-cart-btn" onclick="selectPorc(1200, '2 boules')">
                                üìã Choisir
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/PORC2.jpg" alt="Porc XXL" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Porc au four XXL</div>
                        <div class="food-description">Portion g√©n√©reuse avec atti√©k√®</div>
                        <div class="food-footer">
                            <div class="food-price">2000 FCFA</div>
                            <button class="add-to-cart-btn" onclick="selectPorc(2000, 'XXL')">
                                üìã Choisir
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cat√©gorie: Atti√©k√® sp√©cialit√© -->
        <div class="category-card">
            <div class="category-header">
                <div class="category-icon">üåæ</div>
                <div class="category-info">
                    <h3>Atti√©k√® sp√©cialit√©</h3>
                    <p>Nos sp√©cialit√©s d'atti√©k√®</p>
                </div>
            </div>
            <div class="food-grid">
                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/ChatGPT Image 21 sept. 2025, 17_49_08.png" alt="Atti√©k√® poisson alloko" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Atti√©k√® poisson alloko + Condiment</div>
                        <div class="food-description">Avec poisson, alloko et condiments</div>
                        <div class="food-footer">
                            <div class="food-price">D√®s 1000 FCFA</div>
                            <button class="add-to-cart-btn" onclick="selectAttiekePoisson()">
                                üìã Formats
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/20250921_1803_Qualit√© Image Am√©lior√©e_remix_01k5pg4v3weeea02t6htn46kjd.png" alt="Atti√©k√® poulet alloko" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Atti√©k√® poulet alloko + Condiment</div>
                        <div class="food-description">Avec poulet, alloko et condiments</div>
                        <div class="food-footer">
                            <div class="food-price">D√®s 1500 FCFA</div>
                            <button class="add-to-cart-btn" onclick="selectAttiekePouletAlloko()">
                                üìã Formats
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/ATIEKEPOULET.jpg" alt="Atti√©k√® poulet" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Atti√©k√® poulet + Condiment</div>
                        <div class="food-description">Atti√©k√® poulet avec condiments</div>
                        <div class="food-footer">
                            <div class="food-price">D√®s 1000 FCFA</div>
                            <button class="add-to-cart-btn" onclick="selectAttiekePoulet()">
                                üìã Formats
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/garba.jpg" alt="Garba" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Sp√©cialit√© Garba</div>
                        <div class="food-description">Notre sp√©cialit√© Garba traditionnelle</div>
                        <div class="food-footer">
                            <div class="food-price">D√®s 500 FCFA</div>
                            <button class="add-to-cart-btn" onclick="selectGarba()">
                                üìã Formats
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/at.jpg" alt="Atti√©k√® poisson" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Atti√©k√® poisson</div>
                        <div class="food-description">Atti√©k√® accompagn√© de poisson</div>
                        <div class="food-footer">
                            <div class="food-price">1000 FCFA</div>
                            <button class="add-to-cart-btn" onclick="promptAddToCart('Atti√©k√® poisson', 1000, 'E')">
                                üõí Ajouter
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cat√©gorie: Sucreries -->
        <div class="category-card">
            <div class="category-header">
                <div class="category-icon">üçπ</div>
                <div class="category-info">
                    <h3>Nos Sucreries</h3>
                    <p>Boissons et douceurs</p>
                </div>
            </div>
            <div class="food-grid">
                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/orangina.jpg" alt="Orangina" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Orangina</div>
                        <div class="food-description">Boisson rafra√Æchissante</div>
                        <div class="food-footer">
                            <div class="food-price">500 FCFA</div>
                            <button class="add-to-cart-btn" onclick="promptAddToCart('Orangina', 500, 'I')">
                                üõí Ajouter
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/kapa300.jpg" alt="Kapa" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Kapa</div>
                        <div class="food-description">Boisson locale populaire</div>
                        <div class="food-footer">
                            <div class="food-price">300 FCFA</div>
                            <button class="add-to-cart-btn" onclick="promptAddToCart('Kapa', 300, 'I')">
                                üõí Ajouter
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/codys.jpg" alt="Cody's" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Cody's</div>
                        <div class="food-description">Jus de fruits savoureux</div>
                        <div class="food-footer">
                            <div class="food-price">500 FCFA</div>
                            <button class="add-to-cart-btn" onclick="promptAddToCart('Codys', 500, 'I')">
                                üõí Ajouter
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/koka.jpg" alt="Coca-Cola 50cl" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Coca-Cola 50cl</div>
                        <div class="food-description">Grande bouteille</div>
                        <div class="food-footer">
                            <div class="food-price">500 FCFA</div>
                            <button class="add-to-cart-btn" onclick="promptAddToCart('Coca cola 50cl', 500, 'I')">
                                üõí Ajouter
                            </button>
                        </div>
                    </div>
                </div>

                <div class="food-item">
                    <div class="food-image-wrapper">
                        <img src="image/cook300.jpg" alt="Coca-Cola 33cl" class="food-item-image">
                    </div>
                    <div class="food-item-content">
                        <div class="food-title">Coca-Cola 33cl</div>
                        <div class="food-description">Format standard</div>
                        <div class="food-footer">
                            <div class="food-price">300 FCFA</div>
                            <button class="add-to-cart-btn" onclick="promptAddToCart('Coca cola 33cl', 300, 'I')">
                                üõí Ajouter
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Panier -->
    <div class="modal-overlay" id="cart-modal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close-btn" onclick="toggleCart()">√ó</button>
                <h2>üõí Mon Panier</h2>
                <p>V√©rifiez vos articles</p>
            </div>
            <div class="cart-items" id="cart-items">
                <div class="empty-state">
                    <div class="empty-state-icon">üõí</div>
                    <h3>Panier vide</h3>
                    <p>Ajoutez des plats pour commencer</p>
                </div>
            </div>
            <div class="cart-total" id="cart-total">Total: 0 FCFA</div>
            <form id="order-form">
                <button type="submit" class="checkout-btn">üéØ Commander maintenant</button>
            </form>
        </div>
    </div>

    <!-- Modal Historique -->
    <div class="modal-overlay" id="orders-modal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close-btn" onclick="toggleOrders()">√ó</button>
                <h2>üì¶ Mes Commandes</h2>
                <p>Historique de vos commandes</p>
            </div>
            <div style="padding: 24px;">
                <div id="orders-list">
                    <div class="empty-state">
                        <div class="empty-state-icon">üì¶</div>
                        <h3>Aucune commande</h3>
                        <p>Vos commandes appara√Ætront ici</p>
                    </div>
                </div>
                <button onclick="clearOrders()" class="checkout-btn" style="background: linear-gradient(135deg, #dc3545, #c82333); margin-top: 16px;">
                    üóëÔ∏è Vider l'historique
                </button>
            </div>
        </div>
    </div>

    <!-- Modal S√©lection (Riz, Tchep, Porc, Atti√©k√®) -->
    <div class="modal-overlay" id="selection-modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeSelectionModal()">√ó</button>
            <div class="modal-header">
                <h2 id="selection-modal-title">Faites votre choix</h2>
                <p id="selection-modal-subtitle">S√©lectionnez votre option</p>
            </div>
            <div style="padding: 24px;" id="selection-options"></div>
        </div>
    </div>

      <!-- Modal Quantit√© Personnalis√©e -->
<div class="quantity-modal" id="quantity-modal">
    <div class="quantity-modal-content">
        <div class="quantity-modal-header">
            <h3>Choisir la quantit√©</h3>
            <p>Ajustez selon vos besoins</p>
        </div>
        
        <div class="dish-preview">
            <div class="dish-preview-icon" id="dish-icon">üçΩÔ∏è</div>
            <div class="dish-preview-info">
                <div class="dish-preview-name" id="dish-name">Plat</div>
                <div class="dish-preview-price" id="dish-price">0 FCFA</div>
            </div>
        </div>
        
        <div class="quantity-input-group">
            <label class="quantity-input-label">Quantit√©</label>
            <div class="quantity-controls">
                <button class="quantity-btn" id="quantity-decrease">‚àí</button>
                <input type="number" class="quantity-input" id="quantity-value" value="1" min="1" max="99" readonly>
                <button class="quantity-btn" id="quantity-increase">+</button>
            </div>
        </div>
        
        <div class="quantity-total">
            <div class="quantity-total-label">Total</div>
            <div class="quantity-total-amount" id="quantity-total">0 FCFA</div>
        </div>
        
        <div class="quantity-modal-actions">
            <button class="quantity-action-btn quantity-cancel-btn" onclick="closeQuantityModal()">
                Annuler
            </button>
            <button class="quantity-action-btn quantity-confirm-btn" id="quantity-confirm">
                ‚úì Confirmer
            </button>
        </div>
    </div>
</div>

<!-- Modal Informations Client -->
<div class="customer-info-modal" id="customer-info-modal">
    <div class="customer-info-content">
        <div class="customer-info-header">
            <div class="customer-info-icon">üìã</div>
            <h3>Finaliser la commande</h3>
            <p>Vos coordonn√©es pour la livraison</p>
        </div>
        
        <div class="order-summary">
            <div class="order-summary-title">R√©capitulatif</div>
            <div class="order-summary-items" id="summary-items"></div>
            <div class="order-summary-total" id="summary-total">0 FCFA</div>
        </div>
        
        <form id="customer-info-form">
            <div class="input-group">
    <label class="input-label">
        Nom complet <span class="required">*</span>
    </label>
    <input 
        type="text" 
        class="custom-input" 
        id="customer-name-input"
        placeholder="Ex: Kouassi Jean-Marc"
        required
        autocomplete="name"
    >
</div>


                <!-- SECTION NOUVEAUX PLATS DEPUIS MARCIO -->
<div class="post-card" id="new-dishes-section" style="display: none;">
    <div class="post-header">
        <div class="post-category">
            <div class="category-avatar">üÜï</div>
            <div class="category-info">
                <h3>Nouveaux Plats</h3>
                <p>D√©couvrez nos derni√®res cr√©ations</p>
            </div>
        </div>
    </div>
    
    <div class="food-grid" id="new-dishes-grid">
        <!-- Les nouveaux plats seront ajout√©s ici automatiquement -->
    </div>
    
    <div class="post-actions">
        <p style="font-size: 0.9rem; color: var(--on-surface); text-align: center; font-style: italic; padding: 0.5rem; background: var(--background); border-radius: 8px;">
            üÜï "Nos toutes derni√®res cr√©ations sp√©cialement pour vous !" ‚ú®
        </p>
    </div>
</div>
 </div> 

<!-- NOUVEAU CHAMP - S√©lection √©tablissement -->
<div class="input-group">
    <label class="input-label">
        √âtablissement <span class="required">*</span>
    </label>
    <select 
        class="custom-input" 
        id="customer-establishment-input"
        required
        style="cursor: pointer;"
    >
        <option value="">S√©lectionnez votre √©tablissement</option>
        <option value="utt-loko">üè´ UTT Loko Zone 4</option>
        <option value="la-fontaine">üè¢ La Fontaine</option>
    </select>
    <div class="input-hint">
        üèõÔ∏è Choisissez votre lieu de retrait
    </div>
</div>

<div class="input-group">
    <label class="input-label">
        Num√©ro WhatsApp <span class="required">*</span>
    </label>
    <input 
        type="tel" 
        class="custom-input" 
        id="customer-whatsapp-input"
        placeholder="Ex: 0712345678"
        required
        autocomplete="tel"
    >
    <div class="input-hint">
        üì± Format: 07XX XX XX XX ou +225 07XX XX XX XX
    </div>
</div>
            
            <div class="customer-info-actions">
                <button type="button" class="customer-action-btn customer-cancel-btn" onclick="closeCustomerInfoModal()">
                    Annuler
                </button>
                <button type="submit" class="customer-action-btn customer-submit-btn">
                    ‚úì Confirmer la commande
                </button>
            </div>
        </form>
    </div>
</div>
    <!-- Boutons Flottants -->
    <div class="floating-btns">
        <button class="floating-btn notif-btn" onclick="requestNotificationPermission()" title="Notifications">
            üîî
        </button>
        <button class="floating-btn install-btn" onclick="triggerInstallPrompt()" title="Installer l'app">
            üì±
        </button>
    </div>

 <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, query, orderBy, limit } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-firestore.js";

// ========================================
// CONFIGURATIONS FIREBASE
// ========================================
const firebaseConfig = {
    apiKey: "AIzaSyBsGrY-AqYMoI70kT3WMxLgW0HwYA4KyaQ",
    authDomain: "livraison-c8498.firebaseapp.com",
    projectId: "livraison-c8498",
    storageBucket: "livraison-c8498.firebasestorage.app",
    messagingSenderId: "403240604780",
    appId: "1:403240604780:web:77d84ad03d68bdaddfb449",
    measurementId: "G-5YF89BZ5RY"
};

const firebaseConfigFontaine = {
    apiKey: "AIzaSyC1pJG97RoIJL-zvrRP5OaJAIVkFNoMC1Q",
    authDomain: "livreur-21be8.firebaseapp.com",
    databaseURL: "https://livreur-21be8-default-rtdb.firebaseio.com",
    projectId: "livreur-21be8",
    storageBucket: "livreur-21be8.firebasestorage.app",
    messagingSenderId: "330461481415",
    appId: "1:330461481415:web:3c9987401062181f9731e2",
    measurementId: "G-1KWC1NCJ45"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const appFontaine = initializeApp(firebaseConfigFontaine, "fontaine");
const dbFontaine = getFirestore(appFontaine);

// ========================================
// VARIABLES GLOBALES
// ========================================
let cart = [];
let total = 0;
let customerOrders = JSON.parse(localStorage.getItem('customerOrders')) || [];
let currentAdIndex = 0;

const riceOptions = [
    { format: 'Petit', price: 500, icon: 'üçö', desc: 'Format individuel' },
    { format: 'Moyen', price: 1000, icon: 'ü•ò', desc: 'Pour 1-2 personnes' },
    { format: 'Grand', price: 1500, icon: 'üç≤', desc: 'Pour 2-3 personnes' },
    { format: 'XXL', price: 2000, icon: 'ü•£', desc: 'Pour la famille' }
];

const porcPreparations = [
    { type: 'Saut√©', icon: 'üî•', desc: 'Porc saut√© revenu' },
    { type: 'Grill√©', icon: 'üçñ', desc: 'Porc grill√© croustillant' },
    { type: 'Soupe', icon: 'üçú', desc: 'Porc en soupe' }
];

const tchepTypes = [
    { type: 'Rouge', icon: 'üî¥', desc: 'Sauce rouge traditionnelle' },
    { type: 'Jaune', icon: 'üü°', desc: 'Sauce jaune d√©licate' }
];

let currentQuantityData = { name: '', price: 0, category: '', callback: null };

// ========================================
// GESTION QUANTIT√â
// ========================================
function updateQuantityTotal() {
    const quantityInput = document.getElementById('quantity-value');
    const totalElement = document.getElementById('quantity-total');
    if (!quantityInput || !totalElement) return;
    const quantity = parseInt(quantityInput.value) || 1;
    const total = currentQuantityData.price * quantity;
    totalElement.textContent = `${total.toLocaleString()} FCFA`;
}

function openQuantityModal(name, price, category, callback) {
    currentQuantityData = { name, price, category, callback };
    const dishName = document.getElementById('dish-name');
    const dishPrice = document.getElementById('dish-price');
    const quantityValue = document.getElementById('quantity-value');
    const modal = document.getElementById('quantity-modal');
    if (dishName) dishName.textContent = name;
    if (dishPrice) dishPrice.textContent = `${price.toLocaleString()} FCFA l'unit√©`;
    if (quantityValue) quantityValue.value = 1;
    updateQuantityTotal();
    if (modal) modal.classList.add('show');
}

window.closeQuantityModal = function() {
    const modal = document.getElementById('quantity-modal');
    if (modal) modal.classList.remove('show');
    currentQuantityData = { name: '', price: 0, category: '', callback: null };
};

window.promptAddToCart = function(name, price, category) {
    openQuantityModal(name, price, category, (quantity) => {
        addToCart(name, price, category, quantity);
    });
};

// ========================================
// GESTION PANIER
// ========================================
function addToCart(name, price, category, qty = 1) {
    cart.push({ name, price, category, qty });
    updateCart();
    updateCartBadge();
    const notification = document.createElement('div');
    notification.innerHTML = `‚úÖ ${qty} ${name} ajout√©(s)!`;
    notification.style.cssText = `position:fixed;top:80px;right:20px;background:var(--gradient-success);color:white;padding:16px 24px;border-radius:var(--radius-md);z-index:3000;font-weight:600;box-shadow:var(--shadow-lg);`;
    document.body.appendChild(notification);
    setTimeout(() => notification.remove(), 3000);
}

function updateCart() {
    const cartItems = document.getElementById('cart-items');
    const cartTotal = document.getElementById('cart-total');
    if (!cartItems || !cartTotal) return;
    cartItems.innerHTML = '';
    total = 0;
    if (cart.length === 0) {
        cartItems.innerHTML = `<div class="empty-state"><div class="empty-state-icon">üõí</div><h3>Panier vide</h3><p>Ajoutez des plats pour commencer</p></div>`;
    } else {
        cart.forEach((item, index) => {
            const cartItem = document.createElement('div');
            cartItem.className = 'cart-item';
            cartItem.innerHTML = `<img src="https://ui-avatars.com/api/?name=${encodeURIComponent(item.name)}&background=ff4e00&color=fff&size=60" class="cart-item-image" alt="${item.name}"><div class="cart-item-info"><div class="cart-item-name">${item.qty}x ${item.name}</div><div class="cart-item-price">${(item.price * item.qty).toLocaleString()} FCFA</div></div><button class="remove-btn" onclick="removeFromCart(${index})">√ó</button>`;
            cartItems.appendChild(cartItem);
            total += item.price * item.qty;
        });
    }
    cartTotal.textContent = `Total: ${total.toLocaleString()} FCFA`;
}

function updateCartBadge() {
    const badge = document.getElementById('cart-badge');
    if (!badge) return;
    const totalItems = cart.reduce((sum, item) => sum + item.qty, 0);
    if (totalItems > 0) {
        badge.textContent = totalItems;
        badge.style.display = 'flex';
    } else {
        badge.style.display = 'none';
    }
}

window.removeFromCart = function(index) {
    cart.splice(index, 1);
    updateCart();
    updateCartBadge();
};

window.toggleCart = function() {
    const modal = document.getElementById('cart-modal');
    if (modal) modal.classList.toggle('show');
};

// ========================================
// HISTORIQUE COMMANDES
// ========================================
window.toggleOrders = function() {
    const modal = document.getElementById('orders-modal');
    if (modal) modal.classList.toggle('show');
    updateOrdersList();
};

function updateOrdersList() {
    const ordersList = document.getElementById('orders-list');
    if (!ordersList) return;
    ordersList.innerHTML = '';
    if (customerOrders.length === 0) {
        ordersList.innerHTML = `<div class="empty-state"><div class="empty-state-icon">üì¶</div><h3>Aucune commande</h3><p>Vos commandes appara√Ætront ici</p></div>`;
    } else {
        customerOrders.slice().reverse().forEach(entry => {
            const orderDiv = document.createElement('div');
            orderDiv.style.cssText = `background:var(--background);border-radius:var(--radius-md);padding:16px;margin-bottom:12px;`;
            orderDiv.innerHTML = `<div style="font-weight:700;color:var(--primary);margin-bottom:8px;">${entry.code}</div><div style="font-size:14px;margin-bottom:8px;color:var(--text-secondary);">${entry.summary}</div><div style="display:flex;justify-content:space-between;align-items:center;"><span style="font-weight:700;color:var(--primary);">${entry.total.toLocaleString()} FCFA</span><span style="font-size:12px;color:var(--text-secondary);">${entry.date}</span></div>`;
            ordersList.appendChild(orderDiv);
        });
    }
}

window.clearOrders = function() {
    if (confirm("Vider l'historique ?")) {
        customerOrders = [];
        localStorage.removeItem('customerOrders');
        updateOrdersList();
    }
};

// ========================================
// S√âLECTIONS
// ========================================
window.selectRice = function(riceName) {
    document.getElementById('selection-modal-title').textContent = `üçõ ${riceName}`;
    document.getElementById('selection-modal-subtitle').textContent = 'Choisissez votre format';
    const optionsContainer = document.getElementById('selection-options');
    optionsContainer.innerHTML = '';
    riceOptions.forEach(option => {
        const optionDiv = document.createElement('div');
        optionDiv.style.cssText = `display:flex;align-items:center;justify-content:space-between;padding:16px;background:var(--background);border-radius:var(--radius-md);margin-bottom:12px;cursor:pointer;transition:all 0.3s ease;`;
        optionDiv.onmouseover = () => optionDiv.style.background = 'rgba(255,78,0,0.1)';
        optionDiv.onmouseout = () => optionDiv.style.background = 'var(--background)';
        optionDiv.onclick = () => {
            openQuantityModal(`${riceName} (${option.format})`, option.price, 'C', (quantity) => {
                addToCart(`${riceName} (${option.format})`, option.price, 'C', quantity);
                closeSelectionModal();
            });
        };
        optionDiv.innerHTML = `<div style="display:flex;align-items:center;gap:16px;"><div style="font-size:32px;">${option.icon}</div><div><div style="font-weight:600;margin-bottom:4px;">${option.format}</div><div style="font-size:13px;color:var(--text-secondary);">${option.desc}</div></div></div><div style="font-weight:700;color:var(--primary);">${option.price} FCFA</div>`;
        optionsContainer.appendChild(optionDiv);
    });
    document.getElementById('selection-modal').classList.add('show');
};

window.selectPorc = function(price, format) {
    document.getElementById('selection-modal-title').textContent = `üê∑ Porc au four (${format})`;
    document.getElementById('selection-modal-subtitle').textContent = 'Choisissez la pr√©paration';
    const optionsContainer = document.getElementById('selection-options');
    optionsContainer.innerHTML = '';
    porcPreparations.forEach(prep => {
        const optionDiv = document.createElement('div');
        optionDiv.style.cssText = `display:flex;align-items:center;justify-content:space-between;padding:16px;background:var(--background);border-radius:var(--radius-md);margin-bottom:12px;cursor:pointer;transition:all 0.3s ease;`;
        optionDiv.onmouseover = () => optionDiv.style.background = 'rgba(255,78,0,0.1)';
        optionDiv.onmouseout = () => optionDiv.style.background = 'var(--background)';
        optionDiv.onclick = () => {
            openQuantityModal(`Porc ${prep.type} (${format})`, price, 'D', (quantity) => {
                addToCart(`Porc ${prep.type} (${format})`, price, 'D', quantity);
                closeSelectionModal();
            });
        };
        optionDiv.innerHTML = `<div style="display:flex;align-items:center;gap:16px;"><div style="font-size:32px;">${prep.icon}</div><div><div style="font-weight:600;margin-bottom:4px;">${prep.type}</div><div style="font-size:13px;color:var(--text-secondary);">${prep.desc}</div></div></div><div style="font-weight:700;color:var(--primary);">${price} FCFA</div>`;
        optionsContainer.appendChild(optionDiv);
    });
    document.getElementById('selection-modal').classList.add('show');
};

window.selectTchep = function(tchepName, price) {
    document.getElementById('selection-modal-title').textContent = `üçö ${tchepName}`;
    document.getElementById('selection-modal-subtitle').textContent = 'Choisissez le type';
    const optionsContainer = document.getElementById('selection-options');
    optionsContainer.innerHTML = '';
    tchepTypes.forEach(type => {
        const optionDiv = document.createElement('div');
        optionDiv.style.cssText = `display:flex;align-items:center;justify-content:space-between;padding:16px;background:var(--background);border-radius:var(--radius-md);margin-bottom:12px;cursor:pointer;transition:all 0.3s ease;`;
        optionDiv.onmouseover = () => optionDiv.style.background = 'rgba(255,78,0,0.1)';
        optionDiv.onmouseout = () => optionDiv.style.background = 'var(--background)';
        optionDiv.onclick = () => {
            openQuantityModal(`${tchepName} ${type.type}`, price, 'B', (quantity) => {
                addToCart(`${tchepName} ${type.type}`, price, 'B', quantity);
                closeSelectionModal();
            });
        };
        optionDiv.innerHTML = `<div style="display:flex;align-items:center;gap:16px;"><div style="font-size:32px;">${type.icon}</div><div><div style="font-weight:600;margin-bottom:4px;">Tch√®pe ${type.type}</div><div style="font-size:13px;color:var(--text-secondary);">${type.desc}</div></div></div><div style="font-weight:700;color:var(--primary);">${price} FCFA</div>`;
        optionsContainer.appendChild(optionDiv);
    });
    document.getElementById('selection-modal').classList.add('show');
};

window.selectAttiekePoisson = function() {
    showFormatSelection('Atti√©k√® Poisson Alloko', [
        { name: 'Petit', price: 1000, icon: 'üçΩÔ∏è' },
        { name: 'Moyen', price: 1500, icon: 'ü•ò' },
        { name: 'Grand', price: 2000, icon: 'üç≤' }
    ], 'E');
};

window.selectAttiekePouletAlloko = function() {
    showFormatSelection('Atti√©k√® Poulet Alloko', [
        { name: 'Petit', price: 1500, icon: 'üçΩÔ∏è' },
        { name: 'Moyen', price: 2000, icon: 'ü•ò' },
        { name: 'Grand', price: 2500, icon: 'üç≤' }
    ], 'E');
};

window.selectAttiekePoulet = function() {
    showFormatSelection('Atti√©k√® Poulet', [
        { name: 'Petit', price: 1000, icon: 'üçΩÔ∏è' },
        { name: 'Moyen', price: 1500, icon: 'ü•ò' },
        { name: 'Grand', price: 2000, icon: 'üç≤' }
    ], 'E');
};

window.selectGarba = function() {
    showFormatSelection('Garba', [
        { name: 'Petit', price: 500, icon: 'üçΩÔ∏è' },
        { name: 'Moyen', price: 1000, icon: 'ü•ò' },
        { name: 'Grand', price: 1500, icon: 'üç≤' },
        { name: 'XXL', price: 2000, icon: 'ü•£' }
    ], 'E');
};

function showFormatSelection(dishName, formats, category) {
    document.getElementById('selection-modal-title').textContent = dishName;
    document.getElementById('selection-modal-subtitle').textContent = 'Choisissez votre format';
    const optionsContainer = document.getElementById('selection-options');
    optionsContainer.innerHTML = '';
    formats.forEach(format => {
        const optionDiv = document.createElement('div');
        optionDiv.style.cssText = `display:flex;align-items:center;justify-content:space-between;padding:16px;background:var(--background);border-radius:var(--radius-md);margin-bottom:12px;cursor:pointer;transition:all 0.3s ease;`;
        optionDiv.onmouseover = () => optionDiv.style.background = 'rgba(255,78,0,0.1)';
        optionDiv.onmouseout = () => optionDiv.style.background = 'var(--background)';
        optionDiv.onclick = () => {
            openQuantityModal(`${dishName} (${format.name})`, format.price, category, (quantity) => {
                addToCart(`${dishName} (${format.name})`, format.price, category, quantity);
                closeSelectionModal();
            });
        };
        optionDiv.innerHTML = `<div style="display:flex;align-items:center;gap:16px;"><div style="font-size:32px;">${format.icon}</div><div><div style="font-weight:600;">${format.name}</div></div></div><div style="font-weight:700;color:var(--primary);">${format.price} FCFA</div>`;
        optionsContainer.appendChild(optionDiv);
    });
    document.getElementById('selection-modal').classList.add('show');
}

window.closeSelectionModal = function() {
    const modal = document.getElementById('selection-modal');
    if (modal) modal.classList.remove('show');
};

// ========================================
// HEURES & ADS
// ========================================
function checkOrderingHours() {
    const now = new Date();
    const abidjanTime = new Date(now.toLocaleString("en-US", {timeZone: "Africa/Abidjan"}));
    const hour = abidjanTime.getHours();
    const minutes = abidjanTime.getMinutes();
    const timeAlert = document.getElementById('time-alert');
    if (!timeAlert) return;
    if (hour >= 0 && hour < 10) {
        timeAlert.innerHTML = `‚ö° URGENT : Commandez AVANT 10H pour un retrait IMM√âDIAT ! Il reste ${9-hour}h${60-minutes<10?'0':''}${60-minutes}min`;
        timeAlert.classList.add('urgent');
        timeAlert.style.display = 'block';
    } else if (hour >= 10) {
        timeAlert.innerHTML = `‚è∞ Commandes apr√®s 10H trait√©es pour DEMAIN - Retrait au stand du groupe Express`;
        timeAlert.classList.remove('urgent');
        timeAlert.style.display = 'block';
    }
}

function slideAds(direction) {
    const slider = document.getElementById('ads-slider');
    if (!slider) return;
    const totalAds = 3;
    if (direction === 'next') {
        currentAdIndex = (currentAdIndex + 1) % totalAds;
    } else {
        currentAdIndex = (currentAdIndex - 1 + totalAds) % totalAds;
    }
    slider.style.transform = `translateX(-${currentAdIndex * 100}%)`;
}

// ========================================
// MODAL CLIENT
// ========================================
function openCustomerInfoModal() {
    const modal = document.getElementById('customer-info-modal');
    const summaryItems = document.getElementById('summary-items');
    const summaryTotal = document.getElementById('summary-total');
    if (!modal || !summaryItems || !summaryTotal) return;
    const itemsList = cart.map(item => `${item.qty}x ${item.name}`).join(', ');
    summaryItems.textContent = itemsList;
    summaryTotal.textContent = `${total.toLocaleString()} FCFA`;
    const nameInput = document.getElementById('customer-name-input');
    const establishmentInput = document.getElementById('customer-establishment-input');
    const whatsappInput = document.getElementById('customer-whatsapp-input');
    if (nameInput) nameInput.value = '';
    if (establishmentInput) establishmentInput.value = '';
    if (whatsappInput) whatsappInput.value = '';
    modal.classList.add('show');
    setTimeout(() => { if (nameInput) nameInput.focus(); }, 400);
}

window.closeCustomerInfoModal = function() {
    const modal = document.getElementById('customer-info-modal');
    if (modal) modal.classList.remove('show');
};

// ========================================
// SOUMISSION COMMANDE
// ========================================
const customerInfoForm = document.getElementById('customer-info-form');
if (customerInfoForm) {
    customerInfoForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        const nameInput = document.getElementById('customer-name-input');
        const establishmentInput = document.getElementById('customer-establishment-input');
        const whatsappInput = document.getElementById('customer-whatsapp-input');
        if (!nameInput || !establishmentInput || !whatsappInput) return;
        const customerName = nameInput.value.trim();
        const establishment = establishmentInput.value;
        const whatsappNumber = whatsappInput.value.trim();
        if (!customerName || customerName.length < 2) {
            alert("‚ùå Veuillez entrer un nom valide");
            nameInput.focus();
            return;
        }
        if (!establishment) {
            alert("‚ùå Veuillez s√©lectionner votre √©tablissement");
            establishmentInput.focus();
            return;
        }
        const cleanNumber = whatsappNumber.replace(/\s+/g, '');
        if (cleanNumber.length < 8) {
            alert("‚ùå Num√©ro WhatsApp invalide. Veuillez r√©essayer.");
            whatsappInput.focus();
            return;
        }
        const submitBtn = this.querySelector('.customer-submit-btn');
        if (submitBtn) {
            submitBtn.disabled = true;
            submitBtn.textContent = '‚è≥ Envoi en cours...';
        }
        const now = new Date();
        const abidjanTime = new Date(now.toLocaleString("en-US", {timeZone: "Africa/Abidjan"}));
        const hour = abidjanTime.getHours();
        try {
            const order = {
                customer: {
                    name: customerName,
                    whatsapp: cleanNumber,
                    establishment: establishment === 'utt-loko' ? 'UTT Loko Zone 4' : 'La Fontaine'
                },
                items: [...cart],
                total,
                timestamp: new Date().toISOString(),
                deliveryDate: hour >= 10 ? 'lendemain' : 'aujourdhui'
            };
            const targetDb = establishment === 'la-fontaine' ? dbFontaine : db;
            const docRef = await addDoc(collection(targetDb, 'orders'), order);
            const orderCode = `#GE${cart[0].category}${Date.now().toString().slice(-6)}`;
            customerOrders.push({
                code: orderCode,
                summary: cart.map(i => `${i.qty}x ${i.name}`).join(', '),
                total,
                establishment: order.customer.establishment,
                date: new Date().toLocaleString()
            });
            localStorage.setItem('customerOrders', JSON.stringify(customerOrders));
            closeCustomerInfoModal();
            cart = [];
            updateCart();
            updateCartBadge();
            toggleCart();
            const establishmentName = establishment === 'utt-loko' ? 'UTT Loko Zone 4' : 'La Fontaine';
            const successMessage = document.createElement('div');
            successMessage.style.cssText = `position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:white;padding:32px;border-radius:var(--radius-xl);box-shadow:var(--shadow-lg);z-index:4000;text-align:center;max-width:400px;width:90%;`;
            successMessage.innerHTML = `<div style="font-size:64px;margin-bottom:16px;">üéâ</div><h3 style="font-size:22px;font-weight:700;margin-bottom:12px;color:var(--text-primary);">Commande envoy√©e !</h3><div style="background:var(--background);padding:16px;border-radius:var(--radius-md);margin-bottom:16px;"><div style="font-size:18px;font-weight:700;color:var(--primary);margin-bottom:8px;">${orderCode}</div><div style="font-size:14px;color:var(--text-secondary);margin-bottom:4px;">Client: ${customerName}</div><div style="font-size:14px;color:var(--text-secondary);">üìç ${establishmentName}</div></div><div style="padding:16px;background:${hour<10?'linear-gradient(135deg,rgba(40,167,69,0.1),rgba(52,206,87,0.1))':'linear-gradient(135deg,rgba(255,152,0,0.1),rgba(245,124,0,0.1))'};border-radius:var(--radius-md);margin-bottom:20px;"><div style="font-size:16px;font-weight:600;margin-bottom:4px;">${hour<10?'üöÄ Retrait IMM√âDIAT':'üìÖ Retrait DEMAIN'}</div><div style="font-size:13px;color:var(--text-secondary);">Au stand du groupe Express √† 12H00</div></div><button onclick="this.parentElement.remove()" style="background:var(--gradient-primary);color:white;border:none;padding:12px 32px;border-radius:var(--radius-md);font-weight:600;cursor:pointer;font-size:15px;">Super ! üëç</button>`;
            document.body.appendChild(successMessage);
            setTimeout(() => { if (successMessage.parentElement) { successMessage.remove(); } }, 8000);
        } catch (error) {
            console.error('Erreur:', error);
            alert("‚ùå Erreur lors de l'envoi. V√©rifiez votre connexion.");
        } finally {
            if (submitBtn) {
                submitBtn.disabled = false;
                submitBtn.textContent = '‚úì Confirmer la commande';
            }
        }
    });
}

const orderForm = document.getElementById('order-form');
if (orderForm) {
    orderForm.addEventListener('submit', function(e) {
        e.preventDefault();
        if (cart.length === 0) {
            alert("Votre panier est vide !");
            return;
        }
        openCustomerInfoModal();
    });
}

// ========================================
// NOUVEAUX PLATS
// ========================================
async function loadNewDishes() {
    try {
        const newDishesQuery = query(collection(db, 'nouveaux_plats'), orderBy('timestamp', 'desc'), limit(10));
        const snapshot = await getDocs(newDishesQuery);
        if (snapshot.empty) {
            console.log('Aucun nouveau plat trouv√©');
            return;
        }
        const container = document.querySelector('.container');
        if (!container) return;
        const newDishesSection = document.createElement('div');
        newDishesSection.className = 'category-card';
        newDishesSection.innerHTML = `<div class="category-header"><div class="category-icon">üÜï</div><div class="category-info"><h3>Nouveaux Plats</h3><p>D√©couvrez nos derni√®res cr√©ations</p></div></div><div class="food-grid" id="new-dishes-grid"></div>`;
        container.insertBefore(newDishesSection, container.firstChild);
        const newDishesGrid = document.getElementById('new-dishes-grid');
        snapshot.forEach(doc => {
            const dish = doc.data();
            const dishCard = document.createElement('div');
            dishCard.className = 'food-item';
            dishCard.innerHTML = `<div class="food-image-wrapper"><img src="${dish.image||'image/default.jpg'}" alt="${dish.name}" class="food-item-image"></div><div class="food-item-content"><div class="food-title">${dish.name}</div><div class="food-description">${dish.description||'Nouveau plat d√©licieux'}</div><div class="food-footer"><div class="food-price">${dish.price} FCFA</div><button class="add-to-cart-btn" onclick="promptAddToCart('${dish.name.replace(/'/g,"\\'")}',${dish.price},'${dish.category||'N'}')">üõí Ajouter</button></div></div>`;
            newDishesGrid.appendChild(dishCard);
        });
        console.log(`${snapshot.size} nouveaux plats charg√©s`);
    } catch (error) {
        console.error('Erreur lors du chargement des nouveaux plats:', error);
    }
}

// ========================================
// PWA
window.requestNotificationPermission = async function() {
    try {
        const permission = await Notification.requestPermission();
        if (permission === 'granted') {
            alert('‚úÖ Notifications activ√©es!');
        } else {
            alert('‚ùå Notifications refus√©es');
        }
    } catch (error) {
        console.error('Erreur notifications:', error);
        alert('‚ùå Erreur lors de l\'activation des notifications');
    }
};

window.triggerInstallPrompt = function() {
    alert('üì± Pour installer l\'application:\n\n‚Ä¢ Chrome/Edge: Menu ‚ãÆ > "Ajouter √† l\'√©cran d\'accueil"\n‚Ä¢ Safari: Partager üì§ > "Sur l\'√©cran d\'accueil"');
};

// ========================================
// √âV√âNEMENTS DOM
// ========================================
document.addEventListener('DOMContentLoaded', function() {
    // Bouton diminuer quantit√©
    const decreaseBtn = document.getElementById('quantity-decrease');
    if (decreaseBtn) {
        decreaseBtn.addEventListener('click', function() {
            const input = document.getElementById('quantity-value');
            if (!input) return;
            
            let value = parseInt(input.value) || 1;
            if (value > 1) {
                input.value = value - 1;
                updateQuantityTotal();
            }
        });
    }

    // Bouton augmenter quantit√©
    const increaseBtn = document.getElementById('quantity-increase');
    if (increaseBtn) {
        increaseBtn.addEventListener('click', function() {
            const input = document.getElementById('quantity-value');
            if (!input) return;
            
            let value = parseInt(input.value) || 1;
            if (value < 99) {
                input.value = value + 1;
                updateQuantityTotal();
            }
        });
    }

    // Bouton confirmer quantit√©
    const confirmBtn = document.getElementById('quantity-confirm');
    if (confirmBtn) {
        confirmBtn.addEventListener('click', function() {
            const input = document.getElementById('quantity-value');
            if (!input) return;
            
            const quantity = parseInt(input.value) || 1;
            if (currentQuantityData.callback) {
                currentQuantityData.callback(quantity);
            }
            closeQuantityModal();
        });
    }

    // Fermer modale quantit√© en cliquant √† l'ext√©rieur
    const quantityModal = document.getElementById('quantity-modal');
    if (quantityModal) {
        quantityModal.addEventListener('click', function(e) {
            if (e.target === this) {
                closeQuantityModal();
            }
        });
    }

    // Fermer modale client en cliquant √† l'ext√©rieur
    const customerModal = document.getElementById('customer-info-modal');
    if (customerModal) {
        customerModal.addEventListener('click', function(e) {
            if (e.target === this) {
                closeCustomerInfoModal();
            }
        });
    }
});

// Fermer toutes les modales en cliquant √† l'ext√©rieur
document.addEventListener('click', function(e) {
    if (e.target.classList.contains('modal-overlay')) {
        e.target.classList.remove('show');
    }
});

// ========================================
// INITIALISATION
// ========================================
checkOrderingHours();
setInterval(checkOrderingHours, 60000);
setInterval(() => slideAds('next'), 5000);
loadNewDishes();
</script>
