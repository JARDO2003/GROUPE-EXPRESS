<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>LOKO EXPRESS - Repas Universitaires</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #000000;
            --primary-light: #100f0f;
            --primary-dark: #280059;
            --secondary: #131315;
            --accent: #f10505;
            --gradient: linear-gradient(45deg, #000000, #5851DB, #9805f9, #000000, #1408f8, #FD1D1D, #F56040, #FFDC80);
            --surface: #FFFFFF;
            --background: #FAFAFA;
            --on-surface: #262626;
            --on-surface-light: #8E8E8E;
            --border: #DBDBDB;
            --shadow: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-lg: 0 8px 25px rgba(0,0,0,0.15);
            --radius: 12px;
            --radius-xl: 24px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: var(--background);
            color: var(--on-surface);
            line-height: 1.6;
            min-height: 100vh;
            touch-action: manipulation;
        }

        /* Image Zoom Modal */
        .image-zoom-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .image-zoom-modal.show {
            display: flex;
        }

        .image-zoom-content {
            position: relative;
            max-width: 95%;
            max-height: 95%;
        }

        .zoomed-image {
            width: 100%;
            height: auto;
            max-width: 100%;
            max-height: 90vh;
            object-fit: contain;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }

        .close-zoom-btn {
            position: absolute;
            top: -15px;
            right: -15px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .image-info {
            position: absolute;
            bottom: -60px;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        /* Instagram-like Header */
        .header {
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            padding: 12px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .header-content {
            max-width: 975px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
        }

        .logo-img {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 900;
            font-size: 14px;
        }

        .logo-text {
            font-size: 18px;
            font-weight: 400;
            color: var(--on-surface);
            font-family: 'Segoe UI', sans-serif;
            letter-spacing: -0.5px;
        }

        /* Header Actions */
        .header-actions {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .cart-icon {
            position: relative;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.3s ease;
            min-width: 44px;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart-icon:hover {
            background: var(--background);
            transform: scale(1.1);
        }

        .cart-badge {
            position: absolute;
            top: 0;
            right: 0;
            background: var(--accent);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            min-width: 20px;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50px;
            transition: all 0.2s ease;
            min-height: 44px;
        }

        .user-profile:hover {
            background: var(--background);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid;
            border-image: var(--gradient) 1;
            background: var(--gradient);
        }

        .user-info h4 {
            font-size: 14px;
            font-weight: 600;
            color: var(--on-surface);
            margin: 0;
        }

        .user-info p {
            font-size: 12px;
            color: var(--on-surface-light);
            margin: 0;
        }

        /* Time Alert */
        .time-alert {
            background: linear-gradient(135deg, #ff6b6b, #ff8e53);
            color: white;
            padding: 16px;
            text-align: center;
            font-weight: 600;
            display: none;
            font-size: 14px;
        }

        /* Stories-like Navigation */
        .nav-section {
            padding: 16px 0;
            background: var(--surface);
            border-bottom: 1px solid var(--border);
        }

        .nav-stories {
            max-width: 975px;
            margin: 0 auto;
            display: flex;
            gap: 16px;
            overflow-x: auto;
            padding: 0 16px;
            scrollbar-width: none;
        }

        .nav-stories::-webkit-scrollbar {
            display: none;
        }

        .nav-story {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 80px;
            text-decoration: none;
            color: inherit;
            padding: 8px;
            border-radius: 12px;
        }

        .nav-story:active {
            background: var(--background);
        }

        .nav-story-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            position: relative;
            padding: 2px;
        }

        .nav-story-avatar::before {
            content: '';
            position: absolute;
            inset: 2px;
            border-radius: 50%;
            background: var(--surface);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-story-text {
            font-size: 12px;
            font-weight: 400;
            color: var(--on-surface);
            text-align: center;
            line-height: 1.2;
        }

        /* Main Container */
        .container {
            max-width: 975px;
            margin: 0 auto;
            padding: 16px;
        }

        .main-feed {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        /* Instagram-like Post Cards */
        .post-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            overflow: hidden;
            margin-bottom: 16px;
        }

        .post-header {
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--border);
        }

        .post-category {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .category-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            font-weight: 600;
        }

        .category-info h3 {
            font-size: 16px;
            font-weight: 600;
            margin: 0;
        }

        .category-info p {
            font-size: 14px;
            color: var(--on-surface-light);
            margin: 0;
        }

        /* Grille alimentaire optimis√©e pour mobile */
        .food-grid {
            display: grid;
            gap: 1px;
            background: var(--border);
        }

        /* Responsive grid */
        @media (max-width: 480px) {
            .food-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .food-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (min-width: 769px) {
            .food-grid {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }
        }

        .food-item {
            position: relative;
            background: var(--surface);
            display: flex;
            flex-direction: column;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .food-item:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .food-item:active {
            transform: scale(0.98);
        }

        .food-item-image {
            width: 100%;
            aspect-ratio: 1;
            object-fit: cover;
            transition: all 0.3s ease;
            cursor: zoom-in;
        }

        .food-item-image:hover {
            opacity: 0.9;
        }

        .food-item-content {
            padding: 12px;
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .food-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--on-surface);
            line-height: 1.3;
        }

        .food-description {
            font-size: 12px;
            color: var(--on-surface-light);
            flex: 1;
            line-height: 1.4;
        }

        .food-price {
            font-size: 16px;
            font-weight: 700;
            color: var(--primary);
            margin: 8px 0;
        }

        .add-to-cart-btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            min-height: 44px;
        }

        .add-to-cart-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .add-to-cart-btn:active {
            transform: translateY(0);
        }

        .add-to-cart-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Responsive text sizes */
        @media (max-width: 480px) {
            .food-title {
                font-size: 13px;
            }
            
            .food-description {
                font-size: 11px;
            }
            
            .food-price {
                font-size: 14px;
            }
            
            .add-to-cart-btn {
                padding: 10px 12px;
                font-size: 13px;
            }
            
            .food-item-content {
                padding: 10px;
            }
        }

        .post-actions {
            padding: 16px;
            border-top: 1px solid var(--border);
        }

        .action-buttons {
            display: flex;
            gap: 16px;
            margin-bottom: 8px;
        }

        .action-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.2s ease;
            padding: 8px;
            min-width: 44px;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }

        .action-btn:hover {
            background: var(--background);
            transform: scale(1.1);
        }

        .action-btn:active {
            background: var(--border);
        }

        .action-btn.liked {
            color: red;
        }

        /* Modal styles optimized for mobile */
        .modal, .cart-modal, .degue-modal, .payment-modal, .settings-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.show, .cart-modal.show, .degue-modal.show, .payment-modal.show, .settings-modal.show {
            display: flex;
        }

        .modal-content, .cart-modal-content, .degue-modal-content, .payment-modal-content, .settings-modal-content {
            background: var(--surface);
            border-radius: var(--radius-xl);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        /* Modal Header Styles */
        .modal-header, .cart-modal-header, .degue-modal-header, .payment-modal-header {
            padding: 2rem;
            border-bottom: 1px solid var(--border);
            text-align: center;
        }

        .modal-header h2, .payment-modal-header h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--on-surface);
        }

        .modal-header p {
            color: var(--on-surface-light);
            margin: 0;
        }

        /* Modal Tabs */
        .modal-tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
        }

        .modal-tab {
            flex: 1;
            padding: 1rem;
            border: none;
            background: var(--background);
            color: var(--on-surface-light);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .modal-tab.active {
            background: var(--surface);
            color: var(--on-surface);
            border-bottom: 2px solid var(--primary);
        }

        .tab-content {
            display: none;
            padding: 2rem;
        }

        .tab-content.active {
            display: block;
        }

        /* Form styles */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--on-surface);
        }

        /* Touch-friendly buttons */
        .submit-btn, .checkout-btn, .payment-btn, .danger-btn {
            width: 100%;
            color: white;
            border: none;
            padding: 16px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 48px;
            margin-top: 1rem;
        }

        .submit-btn, .checkout-btn, .payment-btn {
            background: var(--gradient);
        }

        .danger-btn {
            background: linear-gradient(135deg, #dc3545, #c82333);
        }

        .submit-btn:hover, .checkout-btn:hover, .payment-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .submit-btn:active, .checkout-btn:active, .payment-btn:active {
            transform: scale(0.98);
        }

        /* Form inputs optimized for mobile */
        .form-input {
            width: 100%;
            padding: 16px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.2s ease;
            background: var(--surface);
            min-height: 48px;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(225, 48, 108, 0.1);
        }

        /* Photo preview */
        .photo-preview {
            max-width: 100px;
            max-height: 100px;
            border-radius: 50%;
            object-fit: cover;
            display: none;
            margin-top: 1rem;
            border: 3px solid var(--gradient);
        }

        /* Close buttons */
        .close-btn, .close-cart-btn, .close-payment-btn, .close-settings-btn {
            position: absolute;
            top: 16px;
            right: 16px;
            background: rgba(0, 0, 0, 0.1);
            border: none;
            color: var(--on-surface);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 44px;
            min-height: 44px;
        }

        /* Payment Method Selection */
        .payment-methods {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin: 1rem 0;
        }

        .payment-method {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .payment-method:hover {
            background: var(--background);
            border-color: var(--primary);
        }

        .payment-method.selected {
            background: var(--background);
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(225, 48, 108, 0.1);
        }

        .payment-method-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .payment-method-icon {
            font-size: 1.5rem;
        }

        .payment-method-details h4 {
            font-size: 1rem;
            font-weight: 600;
            margin: 0;
        }

        .payment-method-details p {
            font-size: 0.875rem;
            color: var(--on-surface-light);
            margin: 0;
        }

        /* Settings Modal Styles */
        .settings-section {
            margin-bottom: 2rem;
        }

        .settings-section h3 {
            color: var(--on-surface);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .settings-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
            border-bottom: 1px solid var(--border);
        }

        .settings-item:last-child {
            border-bottom: none;
        }

        .settings-item-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .settings-item-icon {
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
        }

        .settings-item-text {
            flex: 1;
        }

        .settings-item-text h4 {
            font-size: 1rem;
            font-weight: 600;
            margin: 0;
        }

        .settings-item-text p {
            font-size: 0.875rem;
            color: var(--on-surface-light);
            margin: 0;
        }

        .settings-btn {
            background: var(--background);
            color: var(--on-surface);
            border: 1px solid var(--border);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .settings-btn:hover {
            background: var(--border);
        }

        /* Cart and other modal specific styles */
        .cart-items {
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 16px;
        }

        .cart-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-image {
            width: 48px;
            height: 48px;
            border-radius: 8px;
            object-fit: cover;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .cart-item-price {
            font-size: 12px;
            color: var(--on-surface-light);
        }

        .cart-total {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary);
            text-align: center;
            padding: 1rem 0;
            border-top: 2px solid var(--border);
            margin-top: 1rem;
        }

        .remove-btn {
            background: none;
            border: none;
            color: var(--on-surface-light);
            cursor: pointer;
            padding: 8px;
            font-size: 20px;
            min-width: 44px;
            min-height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .remove-btn:hover {
            background: var(--background);
            color: var(--accent);
        }

        /* Empty states */
        .empty-state {
            text-align: center;
            padding: 48px 16px;
            color: var(--on-surface-light);
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        /* Degue Options */
        .degue-option {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            border: 1px solid var(--border);
            border-radius: 12px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .degue-option:hover {
            background: var(--background);
            border-color: var(--primary);
        }

        .degue-option-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .degue-option-icon {
            font-size: 1.5rem;
        }

        .degue-option-details h4 {
            font-size: 1rem;
            font-weight: 600;
            margin: 0;
        }

        .degue-option-details p {
            font-size: 0.875rem;
            color: var(--on-surface-light);
            margin: 0;
        }

        .degue-option-price {
            font-size: 1rem;
            font-weight: 700;
            color: var(--primary);
        }

        /* Animations */
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .post-card {
            animation: slideUp 0.6s ease-out;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .cart-badge {
            animation: pulse 0.6s ease-out;
        }

        /* Payment Status */
        .payment-status {
            text-align: center;
            padding: 2rem;
        }

        .payment-status.loading {
            background: linear-gradient(135deg, #ffc107, #fd7e14);
            color: white;
            border-radius: 12px;
        }

        .payment-status.success {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border-radius: 12px;
        }

        .payment-status.error {
            background: linear-gradient(135deg, #dc3545, #e83e8c);
            color: white;
            border-radius: 12px;
        }

        /* Improve touch targets */
        @media (max-width: 768px) {
            .nav-story {
                min-width: 90px;
            }
            
            .header-content {
                padding: 0 12px;
            }
            
            .container {
                padding: 12px;
            }
            
            .logo-text {
                font-size: 16px;
            }
        }

        /* Additional mobile optimizations */
        @media (max-width: 480px) {
            .modal-content, .cart-modal-content, .degue-modal-content, .payment-modal-content, .settings-modal-content {
                max-height: 95vh;
                margin: 10px;
                border-radius: 16px;
            }
            
            .header {
                padding: 8px 0;
            }
            
            .nav-section {
                padding: 12px 0;
            }
            
            .post-header {
                padding: 12px;
            }
            
            .post-actions {
                padding: 12px;
            }
        }

        /* Prevent zoom on input focus on iOS */
        @media (max-width: 768px) {
            input[type="text"], 
            input[type="email"], 
            input[type="tel"], 
            textarea {
                font-size: 16px !important;
            }
        }

        /* Responsive design improvements */
        body {
            font-family: Arial, sans-serif;
            font-size: 18px;
            margin: 0;
            padding: 0;
        }

        .container {
            width: 80%;
            margin: auto;
        }

        img, video {
            max-width: 100%;
            height: auto;
        }

        @media screen and (max-width: 768px) {
            body {
                font-size: 16px;
            }
            .container {
                width: 95%;
            }
        }

        @media screen and (max-width: 480px) {
            body {
                font-size: 14px;
            }
            .container {
                width: 100%;
                padding: 10px;
            }
        }
         /* Styles pour le mode hors ligne */
        .offline {
            filter: grayscale(0.5);
        }
        
        .offline::before {
            content: 'üì∂ Mode hors ligne - Fonctionnalit√©s limit√©es';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #ff6b6b;
            color: white;
            padding: 8px;
            text-align: center;
            z-index: 2000;
            font-size: 14px;
        }
        
        /* Styles pour le contraste √©lev√© */
        .high-contrast {
            filter: contrast(1.5) brightness(1.2);
        }
        
        .high-contrast .post-card {
            border: 2px solid #000;
        }
        
        .high-contrast .food-item {
            border: 1px solid #666;
        }
        
        /* Animation pour les images charg√©es */
        .food-item-image {
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }
        
        .food-item-image.loaded {
            opacity: 1;
        }
        
        /* Styles pour les boutons favoris */
        .favorite-btn {
            transition: transform 0.2s ease;
        }
        
        .favorite-btn:hover {
            transform: scale(1.1);
        }
        
        .favorite-btn:active {
            transform: scale(0.95);
        }
        
        /* Am√©lioration des zones tactiles */
        @media (max-width: 768px) {
            .action-btn, .cart-icon, .nav-story {
                min-width: 48px;
                min-height: 48px;
            }
            
            /* Espacement pour le bouton de contraste */
            .main-feed {
                padding-bottom: 100px;
            }
        }
        
        /* Animation de pulsation pour les notifications */
        @keyframes notification-pulse {
            0% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); opacity: 0.7; }
        }
        
        .notification-badge {
            animation: notification-pulse 2s infinite;
        }
        
        /* Styles pour la recherche sticky */
        .search-input-container {
            position: sticky;
            top: 140px;
            z-index: 10;
            margin: 16px 0;
        }
        
        /* Am√©lioration des transitions */
        .food-item, .post-card, .modal-content, .cart-modal-content {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Loading states */
        .loading-skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Scroll smooth */
        html {
            scroll-behavior: smooth;
        }
        
        /* Focus states pour l'accessibilit√© */
        button:focus, input:focus, .nav-story:focus {
            outline: 2px solid #4A90E2;
            outline-offset: 2px;
        }
        
        /* Print styles */
        @media print {
            .header, .nav-section, .post-actions {
                display: none;
            }
            
            .post-card {
                break-inside: avoid;
                border: 1px solid #000;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Time Alert -->
    <div class="time-alert" id="time-alert">
        ‚è∞ Les commandes sont ferm√©es. Revenez entre 18h00 et 10h00 pour commander.
    </div>

    <!-- Profile Modal -->
    <div class="modal" id="profile-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ú® Bienvenue sur LOKO EXPRESS</h2>
                <p>Cr√©ez votre profil pour d√©couvrir nos d√©licieux repas</p>
            </div>
            
            <div class="modal-tabs">
                <button class="modal-tab active" onclick="showTab('profile-tab')">üë§ Profil</button>
                <button class="modal-tab" onclick="showTab('contact-tab')">üìû Contact</button>
                <button class="modal-tab" onclick="showTab('share-tab')">üîó Partager</button>
            </div>

            <!-- Onglet Profil -->
            <div id="profile-tab" class="tab-content active">
                <form id="profile-form">
                    <div class="form-group">
                        <label for="profile-lastname">Nom *</label>
                        <input type="text" class="form-input" id="profile-lastname" required placeholder="Votre nom de famille">
                    </div>
                    <div class="form-group">
                        <label for="profile-firstname">Pr√©nom *</label>
                        <input type="text" class="form-input" id="profile-firstname" required placeholder="Votre pr√©nom">
                    </div>
                    <div class="form-group">
                        <label for="profile-email">Email ou WhatsApp *</label>
                        <input type="text" class="form-input" id="profile-email" required placeholder="contact@exemple.com ou +225...">
                    </div>
                    <div class="form-group">
                        <label for="profile-phone">Num√©ro Mobile Money *</label>
                        <input type="tel" class="form-input" id="profile-phone" required placeholder="+225 XX XX XX XX XX">
                    </div>
                    <div class="form-group">
                        <label for="profile-photo">Photo de profil (optionnel)</label>
                        <input type="file" class="form-input" id="profile-photo" accept="image/*">
                        <img id="profile-photo-preview" class="photo-preview">
                    </div>
                    <button type="submit" class="submit-btn">
                        ‚úÖ Cr√©er mon profil et commencer
                    </button>
                </form>
            </div>

            <!-- Onglet Contact -->
            <div id="contact-tab" class="tab-content">
                <div class="empty-state">
                    <div class="empty-state-icon">üìû</div>
                    <h3>Contactez-nous</h3>
                    <p>Nous sommes l√† pour vous aider !</p>
                </div>
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <a href="https://wa.me/2250719983044?text=Bonjour%20LOKO%20Express%20!" 
                       target="_blank" 
                       style="background: linear-gradient(135deg, #25D366, #128C7E); color: white; padding: 1rem; text-decoration: none; border-radius: 12px; text-align: center; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                        üí¨ WhatsApp: 07 19 98 30 44
                    </a>
                    <a href="tel:0719983044" 
                       style="background: var(--gradient); color: white; padding: 1rem; text-decoration: none; border-radius: 12px; text-align: center; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                        üìû Appeler maintenant
                    </a>
                </div>
            </div>

            <!-- Onglet Partager -->
            <div id="share-tab" class="tab-content">
                <div class="empty-state">
                    <div class="empty-state-icon">üéâ</div>
                    <h3>Invitez vos amis</h3>
                    <p>Partagez LOKO EXPRESS avec vos proches</p>
                </div>
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <a href="https://wa.me/?text=D√©couvre%20LOKO%20Express%20pour%20tes%20repas%20:%20https://loko-express.vercel.app/" 
                       target="_blank"
                       style="background: linear-gradient(135deg, #25D366, #128C7E); color: white; padding: 1rem; text-decoration: none; border-radius: 12px; text-align: center; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                        üíö Partager sur WhatsApp
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://loko-express.vercel.app/" 
                       target="_blank"
                       style="background: linear-gradient(135deg, #1877F2, #4267B2); color: white; padding: 1rem; text-decoration: none; border-radius: 12px; text-align: center; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                        üëç Partager sur Facebook
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="settings-modal" id="settings-modal">
        <div class="settings-modal-content">
            <div class="modal-header">
                <button class="close-settings-btn" onclick="closeSettings()">&times;</button>
                <h2>‚öôÔ∏è Param√®tres du Compte</h2>
                <p>G√©rez votre profil et vos pr√©f√©rences</p>
            </div>
            <div style="padding: 0 2rem 2rem;">
                <!-- Section Profil -->
                <div class="settings-section">
                    <h3>üë§ Informations du profil</h3>
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <div class="settings-item-icon">‚úèÔ∏è</div>
                            <div class="settings-item-text">
                                <h4>Modifier le profil</h4>
                                <p>Changer nom, pr√©nom, email, t√©l√©phone</p>
                            </div>
                        </div>
                        <button class="settings-btn" onclick="editProfile()">Modifier</button>
                    </div>
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <div class="settings-item-icon">üì±</div>
                            <div class="settings-item-text">
                                <h4>Num√©ro Mobile Money</h4>
                                <p id="current-phone">Non renseign√©</p>
                            </div>
                        </div>
                        <button class="settings-btn" onclick="changePhone()">Changer</button>
                    </div>
                </div>

                <!-- Section Donn√©es -->
                <div class="settings-section">
                    <h3>üìä Mes donn√©es</h3>
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <div class="settings-item-icon">üßæ</div>
                            <div class="settings-item-text">
                                <h4>Historique des commandes</h4>
                                <p id="orders-count">0 commande(s)</p>
                            </div>
                        </div>
                        <button class="settings-btn" onclick="exportOrders()">Exporter</button>
                    </div>
                </div>

                <!-- Section Danger -->
                <div class="settings-section">
                    <h3 style="color: #dc3545;">‚ö†Ô∏è Zone de danger</h3>
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <div class="settings-item-icon">üóëÔ∏è</div>
                            <div class="settings-item-text">
                                <h4>Supprimer le compte</h4>
                                <p>Suppression d√©finitive de toutes vos donn√©es</p>
                            </div>
                        </div>
                        <button class="danger-btn" onclick="deleteAccount()" style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                            Supprimer
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="payment-modal" id="payment-modal">
        <div class="payment-modal-content">
            <div class="payment-modal-header">
                <button class="close-payment-btn" onclick="closePayment()">&times;</button>
                <h3>üí≥ Choisir le mode de paiement</h3>
                <p>S√©lectionnez votre m√©thode de paiement pr√©f√©r√©e</p>
            </div>
            <div style="padding: 2rem;">
                <div class="payment-methods" id="payment-methods">
                    <div class="payment-method" onclick="selectPaymentMethod('mtn')" data-method="mtn">
                        <div class="payment-method-info">
                            <div class="payment-method-icon">üì±</div>
                            <div class="payment-method-details">
                                <h4>MTN Mobile Money</h4>
                                <p>Paiement s√©curis√© avec votre compte MTN</p>
                            </div>
                        </div>
                        <div class="payment-method-radio">
                            <input type="radio" name="payment" value="mtn">
                        </div>
                    </div>
                    <div class="payment-method" onclick="selectPaymentMethod('cash')" data-method="cash">
                        <div class="payment-method-info">
                            <div class="payment-method-icon">üíµ</div>
                            <div class="payment-method-details">
                                <h4>Paiement √† la livraison</h4>
                                <p>Payez en esp√®ces lors de la r√©ception</p>
                            </div>
                        </div>
                        <div class="payment-method-radio">
                            <input type="radio" name="payment" value="cash">
                        </div>
                    </div>
                </div>
                
                <div id="payment-details" style="display: none; margin-top: 1rem;">
                    <div class="form-group">
                        <label for="mtn-number">Num√©ro MTN Mobile Money</label>
                        <input type="tel" class="form-input" id="mtn-number" placeholder="+225 XX XX XX XX XX">
                    </div>
                </div>
                
                <button class="payment-btn" onclick="processPayment()" id="process-payment-btn" disabled>
                    üîí Confirmer et Payer
                </button>
                
                <div id="payment-status" class="payment-status" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- Orders Modal -->
    <div class="modal" id="orders-modal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close-btn" onclick="toggleOrders()">&times;</button>
                <h2>üßæ Mes Commandes</h2>
                <p>Historique de vos commandes r√©centes</p>
            </div>
            <div style="padding: 2rem;">
                <div id="orders-list">
                    <div class="empty-state">
                        <div class="empty-state-icon">üõí</div>
                        <h3>Aucune commande</h3>
                        <p>Vos commandes appara√Ætront ici</p>
                    </div>
                </div>
                <button onclick="clearOrders()" class="danger-btn" style="margin-top: 1rem;">
                    üóëÔ∏è Vider l'historique
                </button>
            </div>
        </div>
    </div>

    <!-- Degu√® Selection Modal -->
    <div class="degue-modal" id="degue-modal">
        <div class="degue-modal-content">
            <div class="degue-modal-header">
                <h3 id="degue-modal-title">ü•õ Choisir votre format de D√™gu√™</h3>
                <p>S√©lectionnez la taille qui vous convient</p>
            </div>
            <div class="degue-options" id="degue-options">
                <!-- Les options seront g√©n√©r√©es dynamiquement -->
            </div>
            <div style="padding: 0 2rem 2rem;">
                <button onclick="closeDegueModal()" style="width: 100%; background: var(--border); color: var(--on-surface); border: none; padding: 1rem; border-radius: 8px; cursor: pointer;">
                    Annuler
                </button>
            </div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div class="cart-modal" id="cart-modal">
        <div class="cart-modal-content">
            <div class="cart-modal-header">
                <h3 class="cart-modal-title">üõí Mon Panier</h3>
                <button class="close-cart-btn" onclick="toggleCart()">&times;</button>
            </div>
            <div class="cart-modal-body" style="padding: 2rem;">
                <div class="cart-items" id="cart-items">
                    <div class="empty-state">
                        <div class="empty-state-icon">üõí</div>
                        <p>Votre panier est vide</p>
                    </div>
                </div>
                
                <div class="cart-total" id="cart-total">
                    Total: 0 FCFA
                </div>
                
                <form id="order-form">
                    <button type="submit" class="checkout-btn">
                        üéØ Commander maintenant
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Header Instagram-style -->
    <header class="header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo-img">GE</div>
                <div class="logo-text">GROUPE EXPRESS</div>
            </div>
            
            <div class="header-actions">
                <button class="cart-icon" onclick="toggleCart()" id="cart-button">
                    üõí
                    <span class="cart-badge" id="cart-badge" style="display: none;">0</span>
                </button>
                
                <div class="user-profile" onclick="openSettings()" id="user-profile" style="display: none;">
                    <img src="https://via.placeholder.com/32x32/E1306C/white?text=U" alt="Avatar" class="user-avatar" id="user-avatar">
                    <div class="user-info">
                        <h4 id="user-name">Utilisateur</h4>
                        <p>Param√®tres</p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Stories-like Navigation -->
    <section class="nav-section">
        <div class="nav-stories">
            <div class="nav-story" onclick="showAbout()">
                <div class="nav-story-avatar">‚ÑπÔ∏è</div>
                <div class="nav-story-text">√Ä propos</div>
            </div>
            <a href="fournisseur.html" class="nav-story">
                <div class="nav-story-avatar">‚ö°</div>
                <div class="nav-story-text">Fournisseur</div>
            </a>
            <div class="nav-story" onclick="toggleOrders()">
                <div class="nav-story-avatar">üßæ</div>
                <div class="nav-story-text">Commandes</div>
            </div>
            <a href="actualit√©.html" class="nav-story">
                <div class="nav-story-avatar">‚ö°</div>
                <div class="nav-story-text">Express Union</div>
            </a>
        </div>
    </section>

    <div class="container">
        <!-- Main Feed -->
        <div class="main-feed">
           <!-- Cat√©gorie A - P√¢tes & Petit pois -->
<div class="post-card">
    <div class="post-header">
        <div class="post-category">
            <div class="category-avatar">üçù</div>
            <div class="category-info">
                <h3>P√¢tes & Petit pois</h3>
                <p>Les classiques revisit√©s</p>
            </div>
        </div>
    </div>
    
    <div class="food-grid">
        <div class="food-item">
            <img src="image/spaghetti rognon.jpg" alt="Spaghetti rognon" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">Spaghetti rognon</div>
                <div class="food-description">Spaghetti pr√©par√© avec du rognon</div>
                <div class="food-price">500 FCFA</div>
                <button class="add-to-cart-btn" onclick="promptAddToCart('Spaghetti rognon', 500, 'A')">
                    üõí Ajouter au panier
                </button>
            </div>
        </div>
        
        <div class="food-item">
            <img src="image/spaghet foi.jpg" alt="Spaghetti foi" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">Spaghetti foi</div>
                <div class="food-description">Spaghetti pr√©par√© avec du foie</div>
                <div class="food-price">500 FCFA</div>
                <button class="add-to-cart-btn" onclick="promptAddToCart('Spaghetti foi', 500, 'A')">
                    üõí Ajouter au panier
                </button>
            </div>
        </div>

        <div class="food-item">
            <img src="image/spaghetti viande.jpg" alt="Spaghetti √† la viande" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">Spaghetti √† la viande</div>
                <div class="food-description">Spaghetti avec de la viande hach√©e</div>
                <div class="food-price">500 FCFA</div>
                <button class="add-to-cart-btn" onclick="promptAddToCart('Spaghetti √† la viande', 500, 'A')">
                    üõí Ajouter au panier
                </button>
            </div>
        </div>

        <div class="food-item">
            <img src="image/spagheti oeuf grilll.jpg" alt="Spaghetti oeuf griller" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">spagheti oeuf grill√©</div>
                <div class="food-description">Spaghetti + oeuf grill√©</div>
                <div class="food-price">750 FCFA</div>
                <button class="add-to-cart-btn" onclick="promptAddToCart('Spaghetti oeuf grill√©', 750, 'A')">
                    üõí Ajouter au panier
                </button>
            </div>
        </div>

        <div class="food-item">
           <img src="image/petit poid.jpg" alt="Petit pois au rognon" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">Petit pois rognon</div>
                <div class="food-description">Petit pois accompagn√© de rognon</div>
                <div class="food-price">1000 fcfa </div>
                <button class="add-to-cart-btn" onclick="promptAddToCart('Petit pois rognon', 1000, 'A')">
                    üõí Ajouter au panier
                </button>
            </div>
        </div>

        <div class="food-item">
            <img src="image/petit poid rogno,.jpg" alt="Petit pois au rognon" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">Petit pois au rognon</div>
                <div class="food-description">Petit pois avec du rognon</div>
                <div class="food-price">1000 FCFA</div>
                <button class="add-to-cart-btn" onclick="promptAddToCart('Petit pois au rognon', 1000, 'A')">
                    üõí Ajouter au panier
                </button>
            </div>
        </div>
    </div>
    
    <div class="post-actions">
    <div class="action-buttons">
        <button class="action-btn" onclick="likePost(this, 'pasta-post')">‚ù§Ô∏è</button>
        <button class="action-btn" onclick="commentPost('pasta-post')">üí¨</button>
        <button class="action-btn" onclick="showComments('pasta-post')">üëÅÔ∏è</button>
    </div>
    <p style="font-size: 0.875rem; color: var(--on-surface-light); margin: 0;" id="pasta-post-likes">
        <strong><span class="like-count">GROUPE EXPRESS</span> personnes</strong> aiment ces plats
    </p>
</div>
</div>

<!-- Cat√©gorie B - Tch√®pe -->
<div class="post-card">
    <div class="post-header">
        <div class="post-category">
            <div class="category-avatar">üçö</div>
            <div class="category-info">
                <h3>Tch√®pes</h3>
                <p>Nos plats de tch√®pe savoureux</p>
            </div>
        </div>
    </div>
    
    <div class="food-grid">
        <div class="food-item">
            <img src="image/tchep poisson.jpg" alt="Tch√®pe au poisson" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">Tch√®pe au poisson</div>
                <div class="food-description">Tch√®pe accompagn√© de poisson frais</div>
                <div class="food-price">500 FCFA</div>
                <button class="add-to-cart-btn" onclick="promptAddToCart('tch√®pe au poisson', 500, 'B')">
                    üõí Ajouter au panier
                </button>
            </div>
        </div>
        
        <div class="food-item">
            <img src="image/tcheo.jpg" alt="Tch√®pe au poulet" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">Tch√®pe au poulet</div>
                <div class="food-description">Tch√®pe au poulet</div>
                <div class="food-price">1000 FCFA</div>
                <button class="add-to-cart-btn" onclick="promptAddToCart('Tch√®pe au poulet', 1000, 'B')">
                    üõí Ajouter au panier
                </button>
            </div>
        </div>
    </div>
    
    <div class="post-actions">
        <div class="action-buttons">
            <button class="action-btn" onclick="likePost(this, 'tchepe-post')">‚ù§Ô∏è</button>
            <button class="action-btn" onclick="commentPost('tchepe-post')">üí¨</button>
            <button class="action-btn">üì§</button>
        </div>
        <p style="font-size: 0.875rem; color: var(--on-surface-light); margin: 0;" id="tchepe-post-likes">
            <strong><span class="like-count">GROUPE EXPRESS</span> personnes</strong> aiment ces plats
        </p>
    </div>
</div>

<!-- Cat√©gorie C - RIZ -->
<div class="post-card">
    <div class="post-header">
        <div class="post-category">
            <div class="category-avatar">üçõ</div>
            <div class="category-info">
                <h3>RIZ</h3>
                <p>D√©couvrez nos plats de riz</p>
            </div>
        </div>
    </div>
    
    <div class="food-grid">
        <div class="food-item">
            <img src="image/riz sauc e.jpg" alt="Riz sauce arachide" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">Riz sauce arachide</div>
                <div class="food-description">Riz sauce arachide</div>
                <div class="food-price">800 FCFA</div>
                <button class="add-to-cart-btn" onclick="promptAddToCart('Riz sauce Arachide', 800, 'C')">
                    üõí Ajouter au panier
                </button>
            </div>
        </div>
        
        <div class="food-item">
            <img src="image/riz souce feuille.jpg" alt="Riz sauce feuille" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">Riz sauce feuille</div>
                <div class="food-description">Riz accompagn√© de sauce aux feuilles vertes riches en vitamines</div>
                <div class="food-price">800 FCFA</div>
                <button class="add-to-cart-btn" onclick="promptAddToCart('Riz sauce feuille', 800, 'C')">
                    üõí Ajouter au panier
                </button>
            </div>
        </div>

        <div class="food-item">
            <img src="image/riz  arachide.jpg" alt="Riz sauce tomate" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">Riz sauce tomate</div>
                <div class="food-description">Riz sauce tomate</div>
                <div class="food-price">800 FCFA</div>
                <button class="add-to-cart-btn" onclick="promptAddToCart('Riz sauce tomate', 800, 'C')">
                    üõí Ajouter au panier
                </button>
            </div>
        </div>

        <div class="food-item">
            <img src="image/riz auberg.jpg" alt="Riz sauce aubergine" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">Riz sauce aubergine</div>
                <div class="food-description">Riz sauce aubergine</div>
                <div class="food-price">800 FCFA</div>
                <button class="add-to-cart-btn" onclick="promptAddToCart('Riz sauce aubergine', 800, 'C')">
                    üõí Ajouter au panier
                </button>
            </div>
        </div>
    </div>
    
    <div class="post-actions">
        <div class="action-buttons">
            <button class="action-btn" onclick="likePost(this, 'riz-post')">‚ù§Ô∏è</button>
            <button class="action-btn" onclick="commentPost('riz-post')">üí¨</button>
            <button class="action-btn">üì§</button>
        </div>
        <p style="font-size: 0.875rem; color: var(--on-surface-light); margin: 0;" id="riz-post-likes">
            <strong><span class="like-count">GROUPE EXPRESS</span> personnes</strong> aiment ces plats
        </p>
    </div>
</div>

<!-- Cat√©gorie D - Sp√©cialit√© Porc -->
<div class="post-card">
    <div class="post-header">
        <div class="post-category">
            <div class="category-avatar">üê∑</div>
            <div class="category-info">
                <h3>Porc au four</h3>
            </div>
        </div>
    </div>
    
    <div class="food-grid">
        <div class="food-item">
            <img src="image/porc au .jpg" alt="Porc au four + Atti√©k√®" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">Porc au four</div>
                <div class="food-description">Porc au four accompagn√© d'atti√©k√®</div>
                <div class="food-price">1000 FCFA</div>
                <button class="add-to-cart-btn" onclick="promptAddToCart('Porc au four accompagn√© datti√©k√®', 1000, 'D')">
                    üõí Ajouter au panier
                </button>
            </div>
        </div>
    </div>
    
    <div class="post-actions">
        <div class="action-buttons">
            <button class="action-btn" onclick="likePost(this, 'porc-post')">‚ù§Ô∏è</button>
            <button class="action-btn" onclick="commentPost('porc-post')">üí¨</button>
            <button class="action-btn">üì§</button>
        </div>
        <p style="font-size: 0.875rem; color: var(--on-surface-light); margin: 0;" id="porc-post-likes">
            <strong><span class="like-count">GROUPE EXPRESS</span> personnes</strong> aiment ce plat
        </p>
    </div>
</div>

<!-- Cat√©gorie E - Atti√©k√® -->
<div class="post-card">
    <div class="post-header">
        <div class="post-category">
            <div class="category-avatar">üåæ</div>
            <div class="category-info">
                <h3>Atti√©k√® sp√©cialit√©</h3>
                <p>D√©couvrez nos plats d'atti√©k√® bien r√©ussi</p>
            </div>
        </div>
    </div>
    
    <div class="food-grid">
        <div class="food-item">
            <img src="image/dindon.jpg" alt="Atti√©k√® dindon" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">Atti√©k√® dindon</div>
                <div class="food-description">Atti√©k√® servi avec du dindon</div>
                <div class="food-price">1000 FCFA</div>
                <button class="add-to-cart-btn" onclick="promptAddToCart('Atti√©k√® dindon', 1000, 'E')">
                    üõí Ajouter au panier
                </button>
            </div>
        </div>
        
        <div class="food-item">
            <img src="image/atieke poulet.jpg" alt="Atti√©k√® poulet" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">Atti√©k√® poulet</div>
                <div class="food-description">Atti√©k√® servi avec du poulet</div>
                <div class="food-price">1000 FCFA</div>
                <button class="add-to-cart-btn" onclick="promptAddToCart('Atti√©k√® poulet', 1000, 'E')">
                    üõí Ajouter au panier
                </button>
            </div>
        </div>

        <div class="food-item">
            <img src="image/atieke alloko.jpg" alt="Atti√©k√® poisson" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">Atti√©k√® poisson</div>
                <div class="food-description">Atti√©k√® servi avec du poisson</div>
                <div class="food-price">1000 FCFA</div>
                <button class="add-to-cart-btn" onclick="promptAddToCart('Atti√©k√® poisson', 1000, 'E')">
                    üõí Ajouter au panier
                </button>
            </div>
        </div>
        
        <div class="food-item">
            <img src="image/garba.jpg" alt="Sp√©cialit√© Garba" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">Sp√©cialit√© Garba</div>
                <div class="food-description">GARBA</div>
                <div class="food-price">500 FCFA</div>
                <button class="add-to-cart-btn" onclick="promptAddToCart('GARBA', 500, 'E')">
                    üõí Ajouter au panier
                </button>
            </div>
        </div>
    </div>
    
    <div class="post-actions">
        <div class="action-buttons">
            <button class="action-btn" onclick="likePost(this, 'attieke-post')">‚ù§Ô∏è</button>
            <button class="action-btn" onclick="commentPost('attieke-post')">üí¨</button>
            <button class="action-btn">üì§</button>
        </div>
        <p style="font-size: 0.875rem; color: var(--on-surface-light); margin: 0;" id="attieke-post-likes">
            <strong><span class="like-count">GROUPE EXPRESS</span> personnes</strong> aiment ces plats
        </p>
    </div>
</div>

<!-- Cat√©gorie F - Desserts -->
<div class="post-card">
    <div class="post-header">
        <div class="post-category">
            <div class="category-avatar">üç∞</div>
            <div class="category-info">
                <h3>Desserts</h3>
                <p>Pour finir en douceur</p>
            </div>
        </div>
    </div>
    
    <div class="food-grid">
        <div class="food-item">
            <img src="image/deguer.jpg" alt="degu√® raisin" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">D√™gu√™ raisin</div>
                <div class="food-description">D√™gu√™ raisin - Diff√©rents formats disponibles</div>
                <div class="food-price">√Ä partir de 250 FCFA</div>
                <button class="add-to-cart-btn" onclick="selectDegue('raisin')">
                    üìã S√©lectionner le format
                </button>
            </div>
        </div>
        
        <div class="food-item">
            <img src="image/deguer.jpg" alt="degu√® coco" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">D√™gu√™ coco</div>
                <div class="food-description">D√™gu√™ coco - Diff√©rents formats disponibles</div>
                <div class="food-price">√Ä partir de 300 FCFA</div>
                <button class="add-to-cart-btn" onclick="selectDegue('coco')">
                    üìã S√©lectionner le format
                </button>
            </div>
        </div>
        
        <div class="food-item">
            <img src="image/deguer.jpg" alt="degu√® simple" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">D√™gu√™ simple</div>
                <div class="food-description">D√™gu√™ simple - Diff√©rents formats disponibles</div>
                <div class="food-price">√Ä partir de 200 FCFA</div>
                <button class="add-to-cart-btn" onclick="selectDegue('simple')">
                    üìã S√©lectionner le format
                </button>
            </div>
        </div>
        
        <div class="food-item">
            <img src="image/deguer.jpg" alt="degu√® raisin coco" class="food-item-image">
            <div class="food-item-content">
                <div class="food-title">D√™gu√™ raisin coco</div>
                <div class="food-description">D√™gu√™ raisin coco - Diff√©rents formats disponibles</div>
                <div class="food-price">√Ä partir de 400 FCFA</div>
                <button class="add-to-cart-btn" onclick="selectDegue('raisin-coco')">
                    üìã S√©lectionner le format
                </button>
            </div>
        </div>
    </div>
    <div class="post-actions">
        <div class="action-buttons">
            <button class="action-btn" onclick="likePost(this, 'desserts-post')">‚ù§Ô∏è</button>
            <button class="action-btn" onclick="commentPost('desserts-post')">üí¨</button>
            <button class="action-btn">üì§</button>
        </div>
        <p style="font-size: 0.875rem; color: var(--on-surface-light); margin: 0;" id="desserts-post-likes">
            <strong><span class="like-count">GROUPE EXPRESS</span> personnes</strong> aiment ces desserts
        </p>
    </div>
</div>
        </div>
    </div>

    <script type="module">
        // Firebase Configuration
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js";
        import { getDatabase, ref, push, set, get, onValue } from "https://www.gstatic.com/firebasejs/10.9.0/firebase-database.js";

       const firebaseConfig = {
  apiKey: "AIzaSyBsGrY-AqYMoI70kT3WMxLgW0HwYA4KyaQ",
  authDomain: "livraison-c8498.firebaseapp.com",
  projectId: "livraison-c8498",
  storageBucket: "livraison-c8498.firebasestorage.app",
  messagingSenderId: "403240604780",
  appId: "1:403240604780:web:77d84ad03d68bdaddfb449",
  measurementId: "G-5YF89BZ5RY"
};
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Synchroniser les likes avec Firebase
        window.syncLikes = function() {
            const likesRef = ref(db, 'likes');
            onValue(likesRef, (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    Object.keys(data).forEach(postId => {
                        const likeCountElement = document.querySelector(`#${postId}-likes .like-count`);
                        if (likeCountElement) {
                            likeCountElement.textContent = data[postId].count || 0;
                        }
                    });
                }
            });
        };

        // Fonction pour liker un post
        window.likePost = function(button, postId) {
            if (!window.userProfile) {
                alert("Veuillez cr√©er votre profil pour liker !");
                window.openProfile();
                return;
            }

            const likesRef = ref(db, `likes/${postId}`);
            get(likesRef).then((snapshot) => {
                const currentData = snapshot.val() || { count: 0, users: {} };
                const userId = window.userProfile.email;
                
                if (currentData.users && currentData.users[userId]) {
                    // Retirer le like
                    delete currentData.users[userId];
                    currentData.count = Math.max(0, currentData.count - 1);
                    button.classList.remove('liked');
                } else {
                    // Ajouter le like
                    if (!currentData.users) currentData.users = {};
                    currentData.users[userId] = true;
                    currentData.count = (currentData.count || 0) + 1;
                    button.classList.add('liked');
                }
                
                set(likesRef, currentData);
            });
        };

        // Fonction pour commenter
        window.commentPost = function(postId) {
            if (!window.userProfile) {
                alert("Veuillez cr√©er votre profil pour commenter !");
                window.openProfile();
                return;
            }
            
            const comment = prompt("Votre commentaire :");
            if (comment && comment.trim()) {
                const commentsRef = ref(db, `comments/${postId}`);
                push(commentsRef, {
                    text: comment.trim(),
                    author: `${window.userProfile.firstname} ${window.userProfile.lastname}`,
                    timestamp: new Date().toISOString()
                });
                alert("Commentaire ajout√© !");
            }
        };

        // Fonction d'envoi de commande avec code unique
        window.submitOrder = function(order) {
            const orderRef = ref(db, 'orders');
            const newOrderRef = push(orderRef);
            
            // G√©n√©rer un code unique bas√© sur timestamp et cat√©gorie
            const timestamp = Date.now();
            const mainCategory = order.items.length > 0 ? order.items[0].category : 'A';
            const uniqueCode = `#LE${mainCategory}${timestamp.toString().slice(-6)}`;
            
            order.code = uniqueCode;
            order.timestamp = new Date().toISOString();
            order.status = "nouveau";
            
            return set(newOrderRef, order)
                .then(() => {
                    console.log('Commande envoy√©e avec succ√®s');
                    return uniqueCode;
                })
                .catch((error) => {
                    console.error('Erreur Firebase:', error);
                    return false;
                });
        };

        // Initialiser la synchronisation des likes au chargement
        window.addEventListener('DOMContentLoaded', () => {
            window.syncLikes();
        });
    </script>

    <script>
     // Variables globales avec persistance localStorage
let userProfile = JSON.parse(localStorage.getItem('userProfile')) || null;
let cart = [];
let total = 0;
let customerOrders = JSON.parse(localStorage.getItem('customerOrders')) || [];
        // V√©rification des heures de commande avec fuseau horaire d'Abidjan
function checkOrderingHours() {
    const now = new Date();
    const abidjanTime = new Date(now.toLocaleString("en-US", {timeZone: "Africa/Abidjan"}));
    const hour = abidjanTime.getHours();
    const minute = abidjanTime.getMinutes();
    const isOrderingClosed = hour >= 10 && hour < 18;
    
    const timeAlert = document.getElementById('time-alert');
    const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');
    const checkoutButton = document.querySelector('.checkout-btn');
    
    // Calcul du temps restant jusqu'√† la r√©ouverture
    let timeUntilOpen = '';
    if (isOrderingClosed) {
        const reopenTime = new Date(abidjanTime);
        reopenTime.setHours(18, 0, 0, 0);
        if (reopenTime <= abidjanTime) {
            reopenTime.setDate(reopenTime.getDate() + 1);
        }
        const diff = reopenTime - abidjanTime;
        const hoursLeft = Math.floor(diff / (1000 * 60 * 60));
        const minutesLeft = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        timeUntilOpen = ` (R√©ouverture dans ${hoursLeft}h ${minutesLeft}min)`;
    }
    
    if (isOrderingClosed) {
        timeAlert.innerHTML = `‚è∞ Les commandes sont ferm√©es de 10h00 √† 18h00 (Heure d'Abidjan)${timeUntilOpen}`;
        timeAlert.style.display = 'block';
        addToCartButtons.forEach(btn => {
            btn.disabled = true;
            btn.textContent = '‚è∞ Commandes ferm√©es';
        });
        if (checkoutButton) {
            checkoutButton.disabled = true;
            checkoutButton.textContent = `‚è∞ Commandes ferm√©es${timeUntilOpen}`;
        }
    } else {
        // Calcul du temps restant avant fermeture
        const closeTime = new Date(abidjanTime);
        closeTime.setHours(10, 0, 0, 0);
        if (closeTime <= abidjanTime) {
            closeTime.setDate(closeTime.getDate() + 1);
        }
        const diff = closeTime - abidjanTime;
        const hoursLeft = Math.floor(diff / (1000 * 60 * 60));
        const minutesLeft = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        
        if (hoursLeft < 2) { // Afficher l'alerte si moins de 2h restantes
            timeAlert.innerHTML = `‚ö†Ô∏è Commandes ouvertes - Fermeture dans ${hoursLeft}h ${minutesLeft}min`;
            timeAlert.style.display = 'block';
            timeAlert.style.background = 'linear-gradient(135deg, #28a745, #34ce57)';
        } else {
            timeAlert.style.display = 'none';
        }
        
        addToCartButtons.forEach(btn => {
            btn.disabled = false;
            if (btn.textContent.includes('‚è∞')) {
                btn.innerHTML = 'üõí Ajouter au panier';
            }
        });
        if (checkoutButton) {
            checkoutButton.disabled = false;
            checkoutButton.textContent = 'üéØ Commander maintenant';
        }
    }
}
// V√©rifier toutes les minutes
        setInterval(checkOrderingHours, 60000);
        
        // Fonction pour ouvrir le modal de profil au premier chargement
        function openProfile() {
            document.getElementById('profile-modal').classList.add('show');
        }

        // Fonction pour ouvrir les param√®tres
        function openSettings() {
            if (!userProfile) {
                alert("Veuillez cr√©er votre profil d'abord !");
                openProfile();
                return;
            }
            
            // Mettre √† jour les informations affich√©es
            document.getElementById('current-phone').textContent = userProfile.phone || 'Non renseign√©';
            document.getElementById('orders-count').textContent = `${customerOrders.length} commande(s)`;
            
            document.getElementById('settings-modal').classList.add('show');
        }

        // Fonction pour fermer les param√®tres
        function closeSettings() {
            document.getElementById('settings-modal').classList.remove('show');
        }

        // Fonction pour modifier le profil
        function editProfile() {
            const newLastname = prompt('Nouveau nom:', userProfile.lastname);
            const newFirstname = prompt('Nouveau pr√©nom:', userProfile.firstname);
            const newEmail = prompt('Nouvel email/WhatsApp:', userProfile.email);
            
            if (newLastname && newFirstname && newEmail) {
                userProfile.lastname = newLastname;
                userProfile.firstname = newFirstname;
                userProfile.email = newEmail;
                localStorage.setItem('userProfile', JSON.stringify(userProfile));
                updateUserDisplay();
                alert('Profil mis √† jour avec succ√®s !');
            }
        }

        // Fonction pour changer le num√©ro de t√©l√©phone
        function changePhone() {
            const newPhone = prompt('Nouveau num√©ro Mobile Money:', userProfile.phone);
            if (newPhone) {
                userProfile.phone = newPhone;
                localStorage.setItem('userProfile', JSON.stringify(userProfile));
                document.getElementById('current-phone').textContent = newPhone;
                alert('Num√©ro mis √† jour avec succ√®s !');
            }
        }

        // Fonction pour exporter les commandes
        function exportOrders() {
            if (customerOrders.length === 0) {
                alert('Aucune commande √† exporter');
                return;
            }
            
            const ordersText = customerOrders.map(order => 
                `Code: ${order.code}\nDate: ${new Date(order.timestamp).toLocaleString()}\nTotal: ${order.total} FCFA\nItems: ${order.items.map(item => `${item.name} (${item.price} FCFA)`).join(', ')}\n---`
            ).join('\n');
            
            const blob = new Blob([ordersText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'mes-commandes-loko-express.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Fonction pour supprimer le compte
        function deleteAccount() {
            if (confirm('√ätes-vous s√ªr de vouloir supprimer votre compte ? Cette action est irr√©versible.')) {
                if (confirm('Derni√®re confirmation : toutes vos donn√©es seront supprim√©es d√©finitivement.')) {
                    localStorage.removeItem('userProfile');
                    localStorage.removeItem('customerOrders');
                    userProfile = null;
                    customerOrders = [];
                    cart = [];
                    total = 0;
                    updateCartDisplay();
                    updateUserDisplay();
                    closeSettings();
                    alert('Compte supprim√© avec succ√®s. Rechargement de la page...');
                    setTimeout(() => location.reload(), 1000);
                }
            }
        }

        // Fonction pour afficher les onglets
        function showTab(tabId) {
            // Masquer tous les onglets
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.modal-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Afficher l'onglet s√©lectionn√©
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // Fonction pour mettre √† jour l'affichage utilisateur
        function updateUserDisplay() {
            const userProfileElement = document.getElementById('user-profile');
            const userNameElement = document.getElementById('user-name');
            const userAvatarElement = document.getElementById('user-avatar');
            
            if (userProfile) {
                userProfileElement.style.display = 'flex';
                userNameElement.textContent = `${userProfile.firstname} ${userProfile.lastname}`;
                
                if (userProfile.photo) {
                    userAvatarElement.src = userProfile.photo;
                } else {
                    userAvatarElement.src = `https://via.placeholder.com/32x32/E1306C/white?text=${userProfile.firstname.charAt(0).toUpperCase()}`;
                }
            } else {
                userProfileElement.style.display = 'none';
            }
        }

        // Gestion du formulaire de profil
        document.getElementById('profile-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const lastname = document.getElementById('profile-lastname').value.trim();
            const firstname = document.getElementById('profile-firstname').value.trim();
            const email = document.getElementById('profile-email').value.trim();
            const phone = document.getElementById('profile-phone').value.trim();
            const photoFile = document.getElementById('profile-photo').files[0];
            
            if (!lastname || !firstname || !email || !phone) {
                alert('Veuillez remplir tous les champs obligatoires');
                return;
            }
            
            // Validation basique du t√©l√©phone
            const phoneRegex = /^(\+225|225)?[0-9\s\-]{8,}$/;
            if (!phoneRegex.test(phone)) {
                alert('Format de t√©l√©phone invalide. Utilisez le format: +225 XX XX XX XX XX');
                return;
            }
            
            userProfile = { lastname, firstname, email, phone };
            
            // Gestion de la photo
            if (photoFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    userProfile.photo = e.target.result;
                    localStorage.setItem('userProfile', JSON.stringify(userProfile));
                    updateUserDisplay();
                    document.getElementById('profile-modal').classList.remove('show');
                    alert(`Bienvenue ${firstname} ! Votre profil a √©t√© cr√©√© avec succ√®s.`);
                };
                reader.readAsDataURL(photoFile);
            } else {
                localStorage.setItem('userProfile', JSON.stringify(userProfile));
                updateUserDisplay();
                document.getElementById('profile-modal').classList.remove('show');
                alert(`Bienvenue ${firstname} ! Votre profil a √©t√© cr√©√© avec succ√®s.`);
            }
        });

        // Preview de la photo de profil
        document.getElementById('profile-photo').addEventListener('change', function(e) {
            const file = e.target.files[0];
            const preview = document.getElementById('profile-photo-preview');
            
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.src = e.target.result;
                    preview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            } else {
                preview.style.display = 'none';
            }
        });

        // Fonction pour s√©lectionner D√™gu√™ avec diff√©rents formats
        function selectDegue(type) {
            if (!userProfile) {
                alert("Veuillez cr√©er votre profil d'abord !");
                openProfile();
                return;
            }
            
            const degueOptions = {
                'simple': {
                    name: 'D√™gu√™ simple',
                    formats: [
                        { size: 'Petit gobelet', price: 200 },
                        { size: 'Grand gobelet', price: 350 },
                        { size: 'Petit bidon', price: 500 },
                        { size: 'Grand bidon', price: 750 }
                    ]
                },
                'raisin': {
                    name: 'D√™gu√™ raisin',
                    formats: [
                        { size: 'Petit gobelet', price: 250 },
                        { size: 'Grand gobelet', price: 400 },
                        { size: 'Petit bidon', price: 600 },
                        { size: 'Grand bidon', price: 850 }
                    ]
                },
                'coco': {
                    name: 'D√™gu√™ coco',
                    formats: [
                        { size: 'Petit gobelet', price: 300 },
                        { size: 'Grand gobelet', price: 450 },
                        { size: 'Petit bidon', price: 650 },
                        { size: 'Grand bidon', price: 900 }
                    ]
                },
                'raisin-coco': {
                    name: 'D√™gu√™ raisin coco',
                    formats: [
                        { size: 'Petit gobelet', price: 400 },
                        { size: 'Grand gobelet', price: 550 },
                        { size: 'Petit bidon', price: 750 },
                        { size: 'Grand bidon', price: 1000 }
                    ]
                }
            };
            
            const selectedDegue = degueOptions[type];
            document.getElementById('degue-modal-title').textContent = `ü•õ ${selectedDegue.name} - Choisir le format`;
            
            const optionsHtml = selectedDegue.formats.map(format => 
                `<div class="degue-option" onclick="addDegueToCart('${selectedDegue.name}', '${format.size}', ${format.price}, 'F')">
                    <div class="degue-option-info">
                        <div class="degue-option-icon">ü•õ</div>
                        <div class="degue-option-details">
                            <h4>${format.size}</h4>
                            <p>${selectedDegue.name}</p>
                        </div>
                    </div>
                    <div class="degue-option-price">${format.price} FCFA</div>
                </div>`
            ).join('');
            
            document.getElementById('degue-options').innerHTML = optionsHtml;
            document.getElementById('degue-modal').classList.add('show');
        }

        // Fonction pour ajouter D√™gu√™ au panier
        function addDegueToCart(name, size, price, category) {
            const item = {
                name: `${name} - ${size}`,
                price: price,
                category: category,
                quantity: 1
            };
            
            cart.push(item);
            total += price;
            updateCartDisplay();
            closeDegueModal();
            
            // Animation du panier
            const cartBadge = document.getElementById('cart-badge');
            cartBadge.style.animation = 'pulse 0.6s ease-out';
            setTimeout(() => cartBadge.style.animation = '', 600);
            
            alert(`${item.name} ajout√© au panier !`);
        }

        // Fonction pour fermer le modal D√™gu√™
        function closeDegueModal() {
            document.getElementById('degue-modal').classList.remove('show');
        }

        // Fonction pour ajouter au panier (avec confirmation)
        function promptAddToCart(name, price, category) {
            if (!userProfile) {
                alert("Veuillez cr√©er votre profil d'abord !");
                openProfile();
                return;
            }
            
            if (confirm(`Ajouter "${name}" au panier pour ${price} FCFA ?`)) {
                addToCart(name, price, category);
            }
        }

        // Fonction pour ajouter un √©l√©ment au panier
        function addToCart(name, price, category) {
            // V√©rifier si l'√©l√©ment existe d√©j√†
            const existingItem = cart.find(item => item.name === name);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    name: name,
                    price: price,
                    category: category,
                    quantity: 1
                });
            }
            
            total += price;
            updateCartDisplay();
            
            // Animation du panier
            const cartBadge = document.getElementById('cart-badge');
            cartBadge.style.animation = 'pulse 0.6s ease-out';
            setTimeout(() => cartBadge.style.animation = '', 600);
            
            alert(`${name} ajout√© au panier !`);
        }

        // Fonction pour supprimer du panier
        function removeFromCart(index) {
            const item = cart[index];
            total -= item.price * item.quantity;
            cart.splice(index, 1);
            updateCartDisplay();
        }

        // Fonction pour mettre √† jour l'affichage du panier
        function updateCartDisplay() {
            const cartBadge = document.getElementById('cart-badge');
            const cartItems = document.getElementById('cart-items');
            const cartTotal = document.getElementById('cart-total');
            
            if (cart.length === 0) {
                cartBadge.style.display = 'none';
                cartItems.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üõí</div>
                        <p>Votre panier est vide</p>
                    </div>
                `;
                cartTotal.textContent = 'Total: 0 FCFA';
                return;
            }
            
            cartBadge.style.display = 'flex';
            cartBadge.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            const itemsHtml = cart.map((item, index) => 
                `<div class="cart-item">
                    <div class="cart-item-info">
                        <div class="cart-item-name">${item.name} ${item.quantity > 1 ? `x${item.quantity}` : ''}</div>
                        <div class="cart-item-price">${item.price * item.quantity} FCFA</div>
                    </div>
                    <button class="remove-btn" onclick="removeFromCart(${index})">&times;</button>
                </div>`
            ).join('');
            
            cartItems.innerHTML = itemsHtml;
            cartTotal.textContent = `Total: ${total} FCFA`;
        }

        // Fonction pour basculer l'affichage du panier
        function toggleCart() {
            const modal = document.getElementById('cart-modal');
            modal.classList.toggle('show');
        }

        // Fonction pour basculer l'affichage des commandes
        function toggleOrders() {
            if (!userProfile) {
                alert("Veuillez cr√©er votre profil d'abord !");
                openProfile();
                return;
            }
            
            const modal = document.getElementById('orders-modal');
            const ordersList = document.getElementById('orders-list');
            
            if (customerOrders.length === 0) {
                ordersList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üõí</div>
                        <h3>Aucune commande</h3>
                        <p>Vos commandes appara√Ætront ici</p>
                    </div>
                `;
            } else {
                const ordersHtml = customerOrders
                    .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp))
                    .map(order => 
                        `<div class="cart-item" style="flex-direction: column; align-items: flex-start; padding: 16px; border: 1px solid var(--border); border-radius: 12px; margin-bottom: 12px;">
                            <div style="display: flex; justify-content: space-between; width: 100%; margin-bottom: 8px;">
                                <strong>${order.code}</strong>
                                <span style="color: var(--on-surface-light); font-size: 12px;">${new Date(order.timestamp).toLocaleString()}</span>
                            </div>
                            <div style="margin-bottom: 8px; font-size: 14px; color: var(--on-surface-light);">
                                ${order.items.map(item => `‚Ä¢ ${item.name} (${item.price} FCFA)`).join('<br>')}
                            </div>
                            <div style="display: flex; justify-content: space-between; width: 100%;">
                                <strong style="color: var(--primary);">Total: ${order.total} FCFA</strong>
                                <span style="background: var(--gradient); color: white; padding: 4px 8px; border-radius: 6px; font-size: 12px; font-weight: 600;">
                                    ${order.status || 'En cours'}
                                </span>
                            </div>
                        </div>`
                    ).join('');
                ordersList.innerHTML = ordersHtml;
            }
            
            modal.classList.toggle('show');
        }

        // Fonction pour vider l'historique des commandes
        function clearOrders() {
            if (confirm('Voulez-vous vraiment vider l\'historique des commandes ?')) {
                customerOrders = [];
                localStorage.setItem('customerOrders', JSON.stringify(customerOrders));
                toggleOrders(); // Refresh display
                alert('Historique vid√© !');
            }
        }

        // Gestion du formulaire de commande
        document.getElementById('order-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!userProfile) {
                alert("Veuillez cr√©er votre profil d'abord !");
                openProfile();
                return;
            }
            
            if (cart.length === 0) {
                alert("Votre panier est vide !");
                return;
            }
            
            // Ouvrir le modal de paiement
            document.getElementById('payment-modal').classList.add('show');
        });

        // Fonction pour s√©lectionner une m√©thode de paiement
        function selectPaymentMethod(method) {
            // Retirer la s√©lection pr√©c√©dente
            document.querySelectorAll('.payment-method').forEach(pm => {
                pm.classList.remove('selected');
                pm.querySelector('input[type="radio"]').checked = false;
            });
            
            // S√©lectionner la nouvelle m√©thode
            const selectedMethod = document.querySelector(`[data-method="${method}"]`);
            selectedMethod.classList.add('selected');
            selectedMethod.querySelector('input[type="radio"]').checked = true;
            
            // Afficher/masquer les d√©tails MTN
            const paymentDetails = document.getElementById('payment-details');
            const processBtn = document.getElementById('process-payment-btn');
            
            if (method === 'mtn') {
                paymentDetails.style.display = 'block';
                // Pr√©-remplir avec le num√©ro du profil si disponible
                if (userProfile.phone) {
                    document.getElementById('mtn-number').value = userProfile.phone;
                }
            } else {
                paymentDetails.style.display = 'none';
            }
            
            processBtn.disabled = false;
            processBtn.textContent = method === 'mtn' ? 'üì± Payer avec MTN' : 'üíµ Confirmer la commande';
        }

        // Fonction pour traiter le paiement
        function processPayment() {
            const selectedMethod = document.querySelector('.payment-method.selected');
            if (!selectedMethod) {
                alert('Veuillez s√©lectionner une m√©thode de paiement');
                return;
            }
            
            const method = selectedMethod.getAttribute('data-method');
            const statusDiv = document.getElementById('payment-status');
            
            let paymentData = {
                method: method,
                customer: userProfile,
                items: cart.slice(),
                total: total
            };
            
            if (method === 'mtn') {
                const mtnNumber = document.getElementById('mtn-number').value.trim();
                if (!mtnNumber) {
                    alert('Veuillez saisir votre num√©ro MTN Mobile Money');
                    return;
                }
                paymentData.mtnNumber = mtnNumber;
            }
            
            // Afficher le statut de chargement
            statusDiv.innerHTML = `
                <div class="loading">
                    <h3>‚è≥ Traitement en cours...</h3>
                    <p>Veuillez patienter pendant que nous traitons votre commande</p>
                </div>
            `;
            statusDiv.style.display = 'block';
            document.getElementById('process-payment-btn').disabled = true;
            
            // Simuler le traitement du paiement
            setTimeout(() => {
                // Utiliser la fonction Firebase pour envoyer la commande
                if (window.submitOrder) {
                    window.submitOrder(paymentData).then(orderCode => {
                        if (orderCode) {
                            // Succ√®s
                            statusDiv.innerHTML = `
                                <div class="success">
                                    <h3>‚úÖ Commande confirm√©e !</h3>
                                    <p><strong>Code de commande: ${orderCode}</strong></p>
                                    <p>Merci ${userProfile.firstname} ! Votre commande a √©t√© re√ßue et sera pr√©par√©e sous peu.</p>
                                    ${method === 'mtn' ? '<p>Le paiement MTN Mobile Money sera trait√© s√©par√©ment.</p>' : '<p>Pr√©parez votre paiement en esp√®ces pour la livraison.</p>'}
                                </div>
                            `;
                            
                            // Sauvegarder la commande localement
                            const orderToSave = {
                                ...paymentData,
                                code: orderCode,
                                timestamp: new Date().toISOString(),
                                status: "confirm√©"
                            };
                            customerOrders.push(orderToSave);
                            localStorage.setItem('customerOrders', JSON.stringify(customerOrders));
                            
                            // Vider le panier
                            cart = [];
                            total = 0;
                            updateCartDisplay();
                            
                            // Fermer automatiquement apr√®s 5 secondes
                            setTimeout(() => {
                                closePayment();
                            }, 5000);
                        } else {
                            throw new Error('Erreur de soumission');
                        }
                    }).catch(error => {
                        statusDiv.innerHTML = `
                            <div class="error">
                                <h3>‚ùå Erreur de traitement</h3>
                                <p>Une erreur s'est produite lors du traitement de votre commande.</p>
                                <p>Veuillez r√©essayer ou nous contacter via WhatsApp.</p>
                            </div>
                        `;
                        document.getElementById('process-payment-btn').disabled = false;
                    });
                } else {
                    // Fallback si Firebase n'est pas disponible
                    const orderCode = `#LE${Date.now().toString().slice(-6)}`;
                    statusDiv.innerHTML = `
                        <div class="success">
                            <h3>‚úÖ Commande enregistr√©e !</h3>
                            <p><strong>Code de commande: ${orderCode}</strong></p>
                            <p>Votre commande a √©t√© enregistr√©e localement. Contactez-nous via WhatsApp pour finaliser.</p>
                        </div>
                    `;
                    
                    // Sauvegarder localement
                    const orderToSave = {
                        ...paymentData,
                        code: orderCode,
                        timestamp: new Date().toISOString(),
                        status: "en attente"
                    };
                    customerOrders.push(orderToSave);
                    localStorage.setItem('customerOrders', JSON.stringify(customerOrders));
                    
                    cart = [];
                    total = 0;
                    updateCartDisplay();
                    
                    setTimeout(() => closePayment(), 5000);
                }
            }, 2000);
        }

        // Fonction pour fermer le modal de paiement
        function closePayment() {
            document.getElementById('payment-modal').classList.remove('show');
            document.getElementById('payment-status').style.display = 'none';
            document.getElementById('process-payment-btn').disabled = true;
            
            // R√©initialiser le formulaire
            document.querySelectorAll('.payment-method').forEach(pm => {
                pm.classList.remove('selected');
                pm.querySelector('input[type="radio"]').checked = false;
            });
            document.getElementById('payment-details').style.display = 'none';
            document.getElementById('mtn-number').value = '';
        }

        // Fonction pour afficher les informations
        function showAbout() {
            alert(`üçΩÔ∏è GROUPE EXPRESS - Livraison de repas universitaires

üìç Service de livraison de repas d√©licieux et abordables
‚è∞ Commandes ouvertes de 18h00 √† 10h00
üì± Contact: 07 19 98 30 44
üíö WhatsApp disponible

Nos sp√©cialit√©s:
‚Ä¢ P√¢tes & Petit pois
‚Ä¢ Tch√®pes
‚Ä¢ Plats de riz
‚Ä¢ Atti√©k√®
‚Ä¢ Desserts (D√™gu√™)
‚Ä¢ Porc au four

Livraison rapide et paiement s√©curis√© !`);
        }

        // Fonction pour afficher les commentaires (placeholder)
        function showComments(postId) {
            alert(`Fonctionnalit√© des commentaires en d√©veloppement pour ${postId}`);
        }

        // Gestion des clics en dehors des modals pour les fermer
        window.addEventListener('click', function(e) {
            const modals = [
                'profile-modal',
                'cart-modal',
                'payment-modal',
                'orders-modal',
                'settings-modal',
                'degue-modal'
            ];
            
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (e.target === modal) {
                    modal.classList.remove('show');
                }
            });
        });

        // Gestion des touches du clavier
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                // Fermer tous les modals ouverts
                document.querySelectorAll('.modal, .cart-modal, .payment-modal, .settings-modal, .degue-modal').forEach(modal => {
                    modal.classList.remove('show');
                });
            }
        });

        // Fonction pour zoomer sur les images
        document.addEventListener('DOMContentLoaded', function() {
            // Cr√©er le modal de zoom pour les images
            const zoomModal = document.createElement('div');
            zoomModal.className = 'image-zoom-modal';
            zoomModal.innerHTML = `
                <div class="image-zoom-content">
                    <img src="" alt="" class="zoomed-image">
                    <button class="close-zoom-btn">&times;</button>
                    <div class="image-info">
                        <h4></h4>
                        <p></p>
                    </div>
                </div>
            `;
            document.body.appendChild(zoomModal);
            
            // Ajouter les √©v√©nements de clic pour toutes les images de nourriture
            document.querySelectorAll('.food-item-image').forEach(img => {
                img.addEventListener('click', function() {
                    const zoomedImg = zoomModal.querySelector('.zoomed-image');
                    const imageInfo = zoomModal.querySelector('.image-info');
                    const foodTitle = this.parentElement.querySelector('.food-title').textContent;
                    const foodDesc = this.parentElement.querySelector('.food-description').textContent;
                    
                    zoomedImg.src = this.src;
                    zoomedImg.alt = this.alt;
                    imageInfo.querySelector('h4').textContent = foodTitle;
                    imageInfo.querySelector('p').textContent = foodDesc;
                    
                    zoomModal.classList.add('show');
                });
            });
            
            // Fermer le modal de zoom
            zoomModal.querySelector('.close-zoom-btn').addEventListener('click', function() {
                zoomModal.classList.remove('show');
            });
            
            zoomModal.addEventListener('click', function(e) {
                if (e.target === zoomModal) {
                    zoomModal.classList.remove('show');
                }
            });
        });

        // Initialisation au chargement de la page
        window.addEventListener('DOMContentLoaded', function() {
            // V√©rifier les heures de commande
            checkOrderingHours();
            
            // Mettre √† jour l'affichage utilisateur
            updateUserDisplay();
            
            // Mettre √† jour l'affichage du panier
            updateCartDisplay();
            
            // Ouvrir le modal de profil si l'utilisateur n'est pas enregistr√©
            if (!userProfile) {
                setTimeout(() => {
                    openProfile();
                }, 1000);
            }
            
            // Ajouter les gestionnaires d'√©v√©nements globaux
            window.openProfile = openProfile;
            window.openSettings = openSettings;
            window.closeSettings = closeSettings;
            window.editProfile = editProfile;
            window.changePhone = changePhone;
            window.exportOrders = exportOrders;
            window.deleteAccount = deleteAccount;
            window.showTab = showTab;
            window.selectDegue = selectDegue;
            window.addDegueToCart = addDegueToCart;
            window.closeDegueModal = closeDegueModal;
            window.promptAddToCart = promptAddToCart;
            window.addToCart = addToCart;
            window.removeFromCart = removeFromCart;
            window.toggleCart = toggleCart;
            window.toggleOrders = toggleOrders;
            window.clearOrders = clearOrders;
            window.selectPaymentMethod = selectPaymentMethod;
            window.processPayment = processPayment;
            window.closePayment = closePayment;
            window.showAbout = showAbout;
            window.showComments = showComments;
            window.updateUserDisplay = updateUserDisplay;
            window.updateCartDisplay = updateCartDisplay;
            window.userProfile = userProfile;
        });

        // Fonction d'animation pour les √©l√©ments au scroll
        function animateOnScroll() {
            const elements = document.querySelectorAll('.post-card');
            const windowHeight = window.innerHeight;
            
            elements.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                
                if (elementTop < windowHeight - 50) {
                    element.style.opacity = '1';
                    element.style.transform = 'translateY(0)';
                }
            });
        }

        // Initialiser l'animation au scroll
        window.addEventListener('scroll', animateOnScroll);
        
        // Performance: throttle scroll events
        let ticking = false;
        function optimizedScroll() {
            if (!ticking) {
                requestAnimationFrame(function() {
                    animateOnScroll();
                    ticking = false;
                });
                ticking = true;
            }
        }
        window.addEventListener('scroll', optimizedScroll);

        // Fonction pour g√©rer la connexion r√©seau
        function handleNetworkStatus() {
            if (navigator.onLine) {
                document.body.classList.remove('offline');
            } else {
                document.body.classList.add('offline');
                alert('Connexion internet perdue. Certaines fonctionnalit√©s peuvent √™tre limit√©es.');
            }
        }

        window.addEventListener('online', handleNetworkStatus);
        window.addEventListener('offline', handleNetworkStatus);

        // Fonction de sauvegarde automatique
        function autoSave() {
            if (userProfile) {
                localStorage.setItem('userProfile', JSON.stringify(userProfile));
            }
            localStorage.setItem('customerOrders', JSON.stringify(customerOrders));
            localStorage.setItem('cartData', JSON.stringify({cart, total}));
        }

        // Sauvegarde automatique toutes les minutes
        setInterval(autoSave, 60000);

        // Restaurer les donn√©es du panier au chargement
        function restoreCartData() {
            const savedCartData = localStorage.getItem('cartData');
            if (savedCartData) {
                const {cart: savedCart, total: savedTotal} = JSON.parse(savedCartData);
                if (savedCart && savedCart.length > 0) {
                    cart = savedCart;
                    total = savedTotal;
                    updateCartDisplay();
                }
            }
        }

        // Service Worker pour le cache (PWA)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed');
                    });
            });
        }

        // Fonction pour optimiser les images
        function optimizeImages() {
            const images = document.querySelectorAll('.food-item-image');
            
            images.forEach(img => {
                // Lazy loading
                if ('loading' in HTMLImageElement.prototype) {
                    img.loading = 'lazy';
                }
                
                // Optimisation responsive
                const observer = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            img.classList.add('loaded');
                            observer.unobserve(img);
                        }
                    });
                });
                
                observer.observe(img);
            });
        }

        // Touch gestures pour mobile
        function initTouchGestures() {
            let startX, startY, distX, distY;
            const threshold = 100;
            
            document.addEventListener('touchstart', function(e) {
                const touch = e.touches[0];
                startX = touch.clientX;
                startY = touch.clientY;
            });
            
            document.addEventListener('touchmove', function(e) {
                if (!startX || !startY) return;
                
                const touch = e.touches[0];
                distX = touch.clientX - startX;
                distY = touch.clientY - startY;
            });
            
            document.addEventListener('touchend', function(e) {
                if (!distX || !distY) return;
                
                // Swipe right to open cart
                if (distX > threshold && Math.abs(distY) < threshold) {
                    toggleCart();
                }
                
                // Reset values
                startX = startY = distX = distY = 0;
            });
        }

        // Notifications Push (si support√©)
        function initPushNotifications() {
            if ('Notification' in window && 'serviceWorker' in navigator) {
                if (Notification.permission === 'default') {
                    Notification.requestPermission().then(permission => {
                        if (permission === 'granted') {
                            console.log('Notifications autoris√©es');
                        }
                    });
                }
            }
        }

        // Fonction pour envoyer une notification
        function sendNotification(title, body, icon = 'üçΩÔ∏è') {
            if (Notification.permission === 'granted') {
                new Notification(title, {
                    body: body,
                    icon: '/icon-192x192.png',
                    badge: '/icon-72x72.png',
                    tag: 'loko-express'
                });
            }
        }

        // Analytics simples (sans cookies)
        function trackEvent(action, category = 'user') {
            const event = {
                action,
                category,
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                url: window.location.href
            };
            
            // Stocker localement pour analyse
            const analytics = JSON.parse(localStorage.getItem('analytics') || '[]');
            analytics.push(event);
            
            // Garder seulement les 1000 derniers √©v√©nements
            if (analytics.length > 1000) {
                analytics.splice(0, analytics.length - 1000);
            }
            
            localStorage.setItem('analytics', JSON.stringify(analytics));
        }

        // Fonction de recherche dans le menu
        function initSearch() {
            const searchInput = document.createElement('input');
            searchInput.type = 'text';
            searchInput.placeholder = 'Rechercher un plat...';
            searchInput.className = 'form-input';
            searchInput.style.margin = '16px';
            searchInput.style.position = 'sticky';
            searchInput.style.top = '80px';
            searchInput.style.zIndex = '50';
            searchInput.style.background = 'var(--surface)';
            searchInput.style.boxShadow = 'var(--shadow)';
            
            // Ins√©rer avant le premier post-card
            const firstPost = document.querySelector('.post-card');
            if (firstPost) {
                firstPost.parentNode.insertBefore(searchInput, firstPost);
            }
            
            searchInput.addEventListener('input', function(e) {
                const query = e.target.value.toLowerCase().trim();
                const foodItems = document.querySelectorAll('.food-item');
                const postCards = document.querySelectorAll('.post-card');
                
                if (!query) {
                    // Afficher tous les √©l√©ments
                    foodItems.forEach(item => item.style.display = 'flex');
                    postCards.forEach(card => card.style.display = 'block');
                    return;
                }
                
                postCards.forEach(card => {
                    let hasVisibleItems = false;
                    const items = card.querySelectorAll('.food-item');
                    
                    items.forEach(item => {
                        const title = item.querySelector('.food-title').textContent.toLowerCase();
                        const desc = item.querySelector('.food-description').textContent.toLowerCase();
                        
                        if (title.includes(query) || desc.includes(query)) {
                            item.style.display = 'flex';
                            hasVisibleItems = true;
                        } else {
                            item.style.display = 'none';
                        }
                    });
                    
                    card.style.display = hasVisibleItems ? 'block' : 'none';
                });
                
                // Track search
                if (query.length > 2) {
                    trackEvent('search', 'menu', query);
                }
            });
        }

        // Fonction pour g√©rer les favoris
        function initFavorites() {
            const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            
            window.toggleFavorite = function(name, price, category) {
                const index = favorites.findIndex(fav => fav.name === name);
                
                if (index > -1) {
                    favorites.splice(index, 1);
                    alert(`${name} retir√© des favoris`);
                } else {
                    favorites.push({name, price, category});
                    alert(`${name} ajout√© aux favoris`);
                }
                
                localStorage.setItem('favorites', JSON.stringify(favorites));
                updateFavoritesDisplay();
            };
            
            function updateFavoritesDisplay() {
                document.querySelectorAll('.food-item').forEach(item => {
                    const title = item.querySelector('.food-title').textContent;
                    const isFavorite = favorites.some(fav => fav.name === title);
                    
                    let heartBtn = item.querySelector('.favorite-btn');
                    if (!heartBtn) {
                        heartBtn = document.createElement('button');
                        heartBtn.className = 'favorite-btn';
                        heartBtn.style.cssText = `
                            position: absolute;
                            top: 8px;
                            right: 8px;
                            background: rgba(255,255,255,0.9);
                            border: none;
                            border-radius: 50%;
                            width: 32px;
                            height: 32px;
                            cursor: pointer;
                            font-size: 16px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            box-shadow: var(--shadow);
                        `;
                        item.style.position = 'relative';
                        item.appendChild(heartBtn);
                        
                        heartBtn.addEventListener('click', function(e) {
                            e.stopPropagation();
                            const price = parseInt(item.querySelector('.food-price').textContent);
                            const category = 'A'; // √Ä d√©terminer dynamiquement
                            toggleFavorite(title, price, category);
                        });
                    }
                    
                    heartBtn.textContent = isFavorite ? '‚ù§Ô∏è' : 'ü§ç';
                });
            }
            
            // Ajouter un onglet favoris dans la navigation
            const navStories = document.querySelector('.nav-stories');
            const favStory = document.createElement('div');
            favStory.className = 'nav-story';
            favStory.innerHTML = `
                <div class="nav-story-avatar">‚ù§Ô∏è</div>
                <div class="nav-story-text">Favoris</div>
            `;
            favStory.addEventListener('click', showFavorites);
            navStories.appendChild(favStory);
            
            function showFavorites() {
                if (favorites.length === 0) {
                    alert('Aucun favori pour le moment. Cliquez sur ü§ç pour ajouter un plat !');
                    return;
                }
                
                const favText = favorites.map(fav => `‚Ä¢ ${fav.name} - ${fav.price} FCFA`).join('\n');
                alert(`Vos plats favoris :\n\n${favText}`);
            }
            
            updateFavoritesDisplay();
        }

        // Fonction pour la g√©olocalisation (livraison)
        function initGeolocation() {
            window.getLocation = function() {
                if (!navigator.geolocation) {
                    alert('La g√©olocalisation n\'est pas support√©e par ce navigateur');
                    return;
                }
                
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        const lat = position.coords.latitude;
                        const lng = position.coords.longitude;
                        alert(`Position d√©tect√©e :\nLatitude: ${lat.toFixed(6)}\nLongitude: ${lng.toFixed(6)}\n\nCette information peut √™tre utilis√©e pour optimiser la livraison.`);
                        
                        // Sauvegarder la position
                        localStorage.setItem('userLocation', JSON.stringify({lat, lng, timestamp: Date.now()}));
                    },
                    function(error) {
                        alert('Impossible d\'obtenir votre position. Veuillez autoriser la g√©olocalisation.');
                    }
                );
            };
        }

        // Fonction pour l'accessibilit√©
        function initAccessibility() {
            // Ajouter des raccourcis clavier
            document.addEventListener('keydown', function(e) {
                if (e.altKey) {
                    switch(e.key) {
                        case 'c':
                            e.preventDefault();
                            toggleCart();
                            break;
                        case 'p':
                            e.preventDefault();
                            if (!userProfile) openProfile();
                            break;
                        case 's':
                            e.preventDefault();
                            if (userProfile) openSettings();
                            break;
                    }
                }
            });
            
            // Am√©liorer le contraste au besoin
            const contrastBtn = document.createElement('button');
            contrastBtn.innerHTML = 'üåì';
            contrastBtn.title = 'Basculer le contraste √©lev√©';
            contrastBtn.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 20px;
                z-index: 1000;
                background: var(--surface);
                border: 1px solid var(--border);
                border-radius: 50%;
                width: 48px;
                height: 48px;
                cursor: pointer;
                font-size: 20px;
                box-shadow: var(--shadow-lg);
            `;
            
            contrastBtn.addEventListener('click', function() {
                document.body.classList.toggle('high-contrast');
            });
            
            document.body.appendChild(contrastBtn);
        }

        // Fonction principale d'initialisation
        function initApp() {
            // Restaurer les donn√©es du panier
            restoreCartData();
            
            // Initialiser les fonctionnalit√©s
            optimizeImages();
            initTouchGestures();
            initPushNotifications();
            initSearch();
            initFavorites();
            initGeolocation();
            initAccessibility();
            
            // Track app start
            trackEvent('app_start', 'app');
            
            console.log('üçΩÔ∏è LOKO EXPRESS initialis√© avec succ√®s !');
        }

        // Lancer l'initialisation compl√®te
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initApp);
        } else {
            initApp();
        }

        // Fonction de nettoyage au d√©chargement
        window.addEventListener('beforeunload', function() {
            autoSave();
            trackEvent('app_close', 'app');
        });
    </script>

    
    
</body>
</html>